'use strict';

(function (root) {

	// Инициализация прилдожения
	var windowWidth = $(window).width();

	function init() {

		if ($('.gallery').get(0)) {
			$('.gallery__element').first().trigger('click');
		}

		$('[data-tabs]').each(function (i, tabs) {
			$(tabs).children().first().trigger('click');
		});

		$('.toggle_close').each(function (i, toggle) {
			var data = $(this).data('toggle');

			$(this).parent().find('.' + data).hide();
		});
	};

	$(window).on('resize', function () {
		windowWidth = $(window).width();

		if (windowWidth <= 960 && $('.container__side-scroll').parent().hasClass('sticky-wrapper')) {
			$('.container__side-scroll').unstick();
		} else if (windowWidth > 960 && $('.container__side-scroll').get(0) && !$('.container__side-scroll').parent().hasClass('sticky-wrapper')) {
			stickySide();
		}
	});

	// Слайдеры
	var dataSliders = {
		feautures: {
			items: 6,
			nav: true
		},
		gallery: {
			items: 1,
			nav: true,
			dots: true,
			mouseDrag: false,
			responsive: {
				961: {
					items: 4,
					dots: false
				}
			}
		},
		promo: {
			items: 1,
			dots: true,
			loop: true,
			autoplay: true
		},
		shop: {
			items: 1,
			loop: true,
			nav: false,
			center: false,
			responsive: {
				680: {
					items: 3,
					center: true,
					nav: true
				}
			}
		}
	};

	$('[data-slider]').each(function (i, slider) {
		var data = $(this).data('slider');

		$(slider).owlCarousel(dataSliders[data]);
	});

	$('.range__slider').each(function () {
		var range = this,
		    minInput = $(range).closest('.range').find('[data-input="min"]'),
		    maxInput = $(range).closest('.range').find('[data-input="max"]');

		function update() {
			var from = $(range).data('from'),
			    to = $(range).data('to');

			$(minInput).val(from);
			$(maxInput).val(to);
		}

		$(range).ionRangeSlider({
			extra_classes: 'range__slider',
			hide_min_max: true,
			hide_from_to: true
		});

		update();
		$(range).on('change', update);
	});

	$('[data-input]').on('change', function () {
		var range = $(this).closest('.range').find('input.range__slider').data("ionRangeSlider"),
		    val = $(this).val(),
		    min = range.options.min,
		    max = range.options.max,
		    from = range.options.from,
		    to = range.options.to,
		    step = range.options.step;

		switch ($(this).data('input')) {
			case 'min':
				if (val <= min) {
					val = min;
				} else if (val >= max) {
					val = max - step;
				} else if (val >= to) {
					val = to - step;
				}

				range.update({
					from: val
				});
				break;
			case 'max':
				if (val >= max) {
					val = max;
				} else if (val <= min) {
					val = min + step;
				} else if (val <= from) {
					val = from + step;
				}

				range.update({
					to: val
				});
				break;
		}

		$(this).val(val);
	});

	// fields
	function filled(field) {
		var val = $(field).val().trim();

		if (val.length > 0) {
			$(field).closest('.field').addClass('field_filled');
		} else {
			$(field).closest('.field').removeClass('field_filled');
		}
	}

	$('.field input, .field textarea').each(function () {
		filled(this);
	});

	$(document).on('keydown', '.field input, .field textarea', function () {
		var t = this;
		setTimeout(function () {
			filled(t);
		}, 100);
	});

	$('.toggle').on('click', function (e) {
		e.stopPropagation();
		var content = $(this).parent().find($('.' + $(this).data('toggle')));
		$(this).toggleClass('toggle_close');
		$(content).stop().slideToggle(300);
	});

	$('.filter__block-content').each(function (i, block) {
		var checks = $(block).find('.checkbox').length;

		if (checks > 5) {
			$(block).addClass('filter__block-content_more');
			$(block).append('<span class="filter__block-more">Показать все</span>');
		}
	});

	$('.filter__block-more').on('click', function () {
		$(this).parent().removeClass('filter__block-content_more');
		$(this).remove();
	});

	$('.drop__item').on('click', function () {
		if (!$(this).hasClass('drop__item_link')) {
			$(this).addClass('drop__item_active').siblings().removeClass('drop__item_active');
		}

		$(this).closest('[data-drop]').removeClass('drop-open');
	});

	$(document).on('click', '[data-drop]', function () {

		var data = $(this).data('drop');

		if (data == 'trigger') {
			$('.drop-open').removeClass('drop-open');
			$(this).parent().closest('[data-drop]').addClass('drop-open');
		} else return;
	});

	$(document).on('click', function (e) {

		var drop = $(e.target).parent().closest('[data-drop]').get(0),
		    tip = $(e.target).parent().closest('.tip').get(0);

		if ($(e.target).hasClass('counter__btn_plus')) return;

		if (!drop) {
			$('.drop-open').removeClass('drop-open');
		}

		if (!tip) {
			$('.tip__hidecontent').hide();
			$('.container__main').css('z-index', '');
		}
	});

	$('.description__show').on('click', function () {
		$(this).hide();
		$('.description__short').hide();
		$('.description__all').show();
	});

	$('[data-close]').on('click', function (e) {
		e.preventDefault();

		$(this).parent().hide();
		$(this).closest('.card').css('z-index', '');
	});

	$('.tip__name').on('click', function () {
		$('.tip').css('z-index', '');
		$('.container__main').css('z-index', '3');
		$('.card').css('z-index', '');
		$('.tip__hidecontent').hide();
		$(this).parent().find('.tip__hidecontent').show();
		$(this).closest('.card').css('z-index', '2');
		$(this).closest('.tip').css('z-index', '9');
	});

	$('.tip_hover').hover(function () {
		$(this).find('.tip__hidecontent').show();
	}, function () {
		$('.tip__hidecontent').hide();
	});

	// Gallery
	$('.gallery__element').on('click', function () {

		if ($(this).hasClass('gallery__element_video')) {
			var video = $(this).find('video').clone();

			$('.modal_zoom .modal__content').html(video);

			$('.modal_zoom').iziModal('open');
		} else {
			var img = $(this).find('img').clone();

			$(this).closest('.gallery').find('.gallery__view').empty().append(img);

			$(this).closest('.gallery__list').find('.gallery__element_active').removeClass('gallery__element_active');
			$(this).addClass('gallery__element_active');

			$('.gallery__view img').magnify();
		}
	});

	$('.vlist_full').each(function (i, list) {
		var show = $(list).data('show'),
		    line = $(list).find('.vlist__line:not(.vlist__line_head)').get(show);

		$(line).hide().nextAll(':not(.vlist__line_more)').hide();
	});

	$('.vlist__more').on('click', function () {
		$(this).closest('.vlist').toggleClass('vlist_allshow');
	});

	// Modal

	setTimeout(function () {
		$('[data-modal]').iziModal({
			onClosing: function onClosing(r) {
				var video = r.$element.find('video').get(0);

				if (video) {
					video.pause();
				}
			}
		});
	}, 1);

	$('[data-open]').on('click', function (e) {
		e.preventDefault();

		var m = $(this).data('open');
		$('[data-modal=' + m + ']').iziModal('open');
	});

	$('.gallery__view, .shop__slide').on('click', function () {
		var img = $(this).find('img').clone();

		$('.modal_zoom .modal__content').html(img);

		$('.modal_zoom').iziModal('open');
	});

	$('.filter-toggle').on('click', function () {
		$('.filter .toggle:not(.toggle_close)').trigger('click');
		$('.filter').toggle();
	});

	$('.m-menu__toggle').on('click', function () {
		if (!$('.page').hasClass('page_freeze')) {
			var h = $('.m-menu__content').height();
			$('.page').addClass('page_freeze').css('height', h + 'px');
			$('html,body').css('overflow-x', 'hidden');
		} else {
			$('.page').removeClass('page_freeze').css('height', '');
			$('html,body').css('overflow', '');
		};

		$(window).scrollTop(0);

		$('.m-menu__content').toggle();
	});

	$('.m-menu__item_drop').on('click', function (e) {
		e.stopPropagation();

		var drop = $(this).find('.m-menu__drop').first(),
		    catalog = Boolean($(this).closest('.m-menu__drop_catalog').get(0)) || Boolean($(this).find('.m-menu__drop_catalog').get(0));

		if ($(e.target).parentsUntil('.m-menu__item_drop').length <= 1) {
			$(drop).toggleClass('m-menu__drop_show');

			if (!catalog) {
				var h = $('.m-menu__content').height();
				$('.page').css('height', h);
				return;
			}

			if ($(drop).hasClass('m-menu__drop_show')) {
				var _h = $(drop).find('.m-menu__list').first().height();
				$('.page').css('height', _h);
			} else {
				var _h2 = $(this).closest('.m-menu__list').height();
				$('.page').css('height', _h2);
			}
		}
	});

	$('.m-menu__back').on('click', function (e) {
		e.stopPropagation();

		$(this).closest('.m-menu__drop_show').removeClass('m-menu__drop_show');

		var h = $('.m-menu__content').height();
		$('.page').css('height', h);
		return;
	});

	$('[data-tabs] > *').on('click', function (e) {
		e.preventDefault();

		var data = $(this).parent().data('tabs'),
		    index = $(this).index(),
		    content = $('[data-tabs-content=' + data + ']').children().get(index);

		$(content).show().siblings().hide();

		if (!content) {
			$('[data-tabs-content=' + data + ']').children().hide();
		}

		$(this).addClass('active').siblings().removeClass('active');
	});

	$('.video').on('click', function () {
		var id = $(this).data('id');

		$('#' + id).iziModal('open');
	});

	$('.checkbox input').on('click', function (e) {
		e.stopPropagation();

		$(this).closest('.checkbox').toggleClass('checkbox_active');
	});

	var scrolling,
	    toTop = document.querySelector('.to-top');

	document.addEventListener('scroll', function (e) {
		scrolling = (window.pageYOffset || document.body.scrollTop) - (document.body.clientTop || 0);

		if ($(e.target).closest('.results').get(0)) return;

		if ($(window).width() > 960) {
			if (scrolling >= 200) {
				$('.header__fix').addClass('header__fix_show');
				$('.results').appendTo('.header__fix .search');
			} else if ($('.header__fix').hasClass('header__fix_show')) {
				$('.header__fix').removeClass('header__fix_show');
				$('.results').appendTo('.header__body .search');
			}
		} else {
			if (scrolling >= 31 && !$('.page').hasClass('page_freeze')) {
				$('.header__mobile').addClass('header__mobile_fix');
			} else if ($('.header__mobile').hasClass('header__mobile_fix')) {
				$('.header__mobile').removeClass('header__mobile_fix');
			}
		}

		if (scrolling >= 1000 && windowWidth > 960) {
			toTop.classList.add('to-top_show');
		} else {
			toTop.classList.remove('to-top_show');
		}
	}, true);

	$('.to-top').on('click', function () {
		$("html, body").stop().animate({ scrollTop: 0 }, 500, 'swing');
	});

	$('.counter__btn_plus').on('click', function (e) {
		e.preventDefault();

		$('.card').css('z-index', '');

		$('.tip__hidecontent').hide();
		$('.tip').css('z-index', '');
		$(this).parent().find('.tip__hidecontent').first().show();
		$(this).closest('.card').css('z-index', '5');
		$(this).parent().find('.tip').css('z-index', '9');

		if ($('.container__side').get(0)) {
			$('.container__main').css('z-index', '3');
		}
	});

	// search
	$('.search__field input').on('click', function () {
		$(this).closest('.search').addClass('search_focus');
		$('.page').append('<div class="fade-bg"></div>');
	});

	$(document).on('click', '.fade-bg', function (e) {
		$('.search').removeClass('search_focus');
		$(this).remove();
	});

	$('button.btn, .counter__btn, .close').on('click', function (e) {
		e.preventDefault();
	});

	$('a[href^="#"]').on('click', function (e) {
		e.preventDefault();
		var id = $(this).attr('href');

		$('html, body').animate({
			scrollTop: $(id).offset().top + $('body').scrollTop() - 80
		}, 1000);
	});

	$('.drop .close').on('click', function (e) {
		e.preventDefault();
		e.stopPropagation();

		$(this).closest('.drop-open').removeClass('drop-open');
	});

	var heightBottomScroll = 0;

	$('.page__content').nextAll().each(function (i, el) {
		heightBottomScroll += $(el).height();
	});

	// sticky cart side

	function stickySide() {
		$('.container__side-scroll').sticky({
			topSpacing: 80,
			bottomSpacing: $('.footer').height() + $('.container__side-scroll').offset().top
		});
	}

	if (windowWidth > 960 && $('.container__side-scroll').get(0)) stickySide();

	init();
})(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJyb290Iiwid2luZG93V2lkdGgiLCIkIiwid2luZG93Iiwid2lkdGgiLCJpbml0IiwiZ2V0IiwiZmlyc3QiLCJ0cmlnZ2VyIiwiZWFjaCIsImkiLCJ0YWJzIiwiY2hpbGRyZW4iLCJ0b2dnbGUiLCJkYXRhIiwicGFyZW50IiwiZmluZCIsImhpZGUiLCJvbiIsImhhc0NsYXNzIiwidW5zdGljayIsInN0aWNreVNpZGUiLCJkYXRhU2xpZGVycyIsImZlYXV0dXJlcyIsIml0ZW1zIiwibmF2IiwiZ2FsbGVyeSIsImRvdHMiLCJtb3VzZURyYWciLCJyZXNwb25zaXZlIiwicHJvbW8iLCJsb29wIiwiYXV0b3BsYXkiLCJzaG9wIiwiY2VudGVyIiwic2xpZGVyIiwib3dsQ2Fyb3VzZWwiLCJyYW5nZSIsIm1pbklucHV0IiwiY2xvc2VzdCIsIm1heElucHV0IiwidXBkYXRlIiwiZnJvbSIsInRvIiwidmFsIiwiaW9uUmFuZ2VTbGlkZXIiLCJleHRyYV9jbGFzc2VzIiwiaGlkZV9taW5fbWF4IiwiaGlkZV9mcm9tX3RvIiwibWluIiwib3B0aW9ucyIsIm1heCIsInN0ZXAiLCJmaWxsZWQiLCJmaWVsZCIsInRyaW0iLCJsZW5ndGgiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiZG9jdW1lbnQiLCJ0Iiwic2V0VGltZW91dCIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJjb250ZW50IiwidG9nZ2xlQ2xhc3MiLCJzdG9wIiwic2xpZGVUb2dnbGUiLCJibG9jayIsImNoZWNrcyIsImFwcGVuZCIsInJlbW92ZSIsInNpYmxpbmdzIiwiZHJvcCIsInRhcmdldCIsInRpcCIsImNzcyIsInNob3ciLCJwcmV2ZW50RGVmYXVsdCIsImhvdmVyIiwidmlkZW8iLCJjbG9uZSIsImh0bWwiLCJpemlNb2RhbCIsImltZyIsImVtcHR5IiwibWFnbmlmeSIsImxpc3QiLCJsaW5lIiwibmV4dEFsbCIsIm9uQ2xvc2luZyIsInIiLCIkZWxlbWVudCIsInBhdXNlIiwibSIsImgiLCJoZWlnaHQiLCJzY3JvbGxUb3AiLCJjYXRhbG9nIiwiQm9vbGVhbiIsInBhcmVudHNVbnRpbCIsImluZGV4IiwiaWQiLCJzY3JvbGxpbmciLCJ0b1RvcCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwicGFnZVlPZmZzZXQiLCJib2R5IiwiY2xpZW50VG9wIiwiYXBwZW5kVG8iLCJjbGFzc0xpc3QiLCJhZGQiLCJhbmltYXRlIiwiYXR0ciIsIm9mZnNldCIsInRvcCIsImhlaWdodEJvdHRvbVNjcm9sbCIsImVsIiwic3RpY2t5IiwidG9wU3BhY2luZyIsImJvdHRvbVNwYWNpbmciXSwibWFwcGluZ3MiOiI7O0FBQUEsQ0FBQyxVQUFTQSxJQUFULEVBQWU7O0FBRWY7QUFDQSxLQUFJQyxjQUFjQyxFQUFFQyxNQUFGLEVBQVVDLEtBQVYsRUFBbEI7O0FBRUEsVUFBU0MsSUFBVCxHQUFnQjs7QUFFZixNQUFJSCxFQUFFLFVBQUYsRUFBY0ksR0FBZCxDQUFrQixDQUFsQixDQUFKLEVBQTBCO0FBQ3pCSixLQUFFLG1CQUFGLEVBQXVCSyxLQUF2QixHQUErQkMsT0FBL0IsQ0FBdUMsT0FBdkM7QUFDQTs7QUFFRE4sSUFBRSxhQUFGLEVBQWlCTyxJQUFqQixDQUFzQixVQUFTQyxDQUFULEVBQVlDLElBQVosRUFBa0I7QUFDdkNULEtBQUVTLElBQUYsRUFBUUMsUUFBUixHQUFtQkwsS0FBbkIsR0FBMkJDLE9BQTNCLENBQW1DLE9BQW5DO0FBQ0EsR0FGRDs7QUFJQU4sSUFBRSxlQUFGLEVBQW1CTyxJQUFuQixDQUF3QixVQUFTQyxDQUFULEVBQVlHLE1BQVosRUFBb0I7QUFDM0MsT0FBSUMsT0FBT1osRUFBRSxJQUFGLEVBQVFZLElBQVIsQ0FBYSxRQUFiLENBQVg7O0FBRUFaLEtBQUUsSUFBRixFQUFRYSxNQUFSLEdBQWlCQyxJQUFqQixDQUFzQixNQUFJRixJQUExQixFQUFnQ0csSUFBaEM7QUFDQSxHQUpEO0FBS0E7O0FBRURmLEdBQUVDLE1BQUYsRUFBVWUs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WixFQUFnQjtBQUNsREQsd0JBQXNCbkgsRUFBRW9ILEVBQUYsRUFBTXRCLE1BQU4sRUFBdEI7QUFDQSxFQUZEOztBQUlBOztBQUVBLFVBQVMzRSxVQUFULEdBQXNCO0FBQ3JCbkIsSUFBRSx5QkFBRixFQUE2QnFILE1BQTdCLENBQW9DO0FBQ25DQyxlQUFZLEVBRHVCO0FBRW5DQyxrQkFBZXZILEVBQUUsU0FBRixFQUFhOEYsTUFBYixLQUF3QjlGLEVBQUUseUJBQUYsRUFBNkJpSCxNQUE3QixHQUFzQ0M7QUFGMUMsR0FBcEM7QUFJQTs7QUFFRCxLQUFJbkgsY0FBYyxHQUFkLElBQXFCQyxFQUFFLHlCQUFGLEVBQTZCSSxHQUE3QixDQUFpQyxDQUFqQyxDQUF6QixFQUE4RGU7O0FBRTlEaEI7QUFHQSxDQTVmRCxFQTRmR0YsTUE1ZkgiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKHJvb3QpIHtcblxuXHQvLyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQv9GA0LjQu9C00L7QttC10L3QuNGPXG5cdHZhciB3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xuXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cblx0XHRpZiAoJCgnLmdhbGxlcnknKS5nZXQoMCkpIHtcblx0XHRcdCQoJy5nYWxsZXJ5X19lbGVtZW50JykuZmlyc3QoKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdH1cblxuXHRcdCQoJ1tkYXRhLXRhYnNdJykuZWFjaChmdW5jdGlvbihpLCB0YWJzKSB7XG5cdFx0XHQkKHRhYnMpLmNoaWxkcmVuKCkuZmlyc3QoKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdH0pO1xuXG5cdFx0JCgnLnRvZ2dsZV9jbG9zZScpLmVhY2goZnVuY3Rpb24oaSwgdG9nZ2xlKSB7XG5cdFx0XHR2YXIgZGF0YSA9ICQodGhpcykuZGF0YSgndG9nZ2xlJyk7XG5cblx0XHRcdCQodGhpcykucGFyZW50KCkuZmluZCgnLicrZGF0YSkuaGlkZSgpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdCQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24oKSB7XG5cdFx0d2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcblxuXHRcdGlmICh3aW5kb3dXaWR0aCA8PSA5NjAgJiYgJCgnLmNvbnRhaW5lcl9fc2lkZS1zY3JvbGwnKS5wYXJlbnQoKS5oYXNDbGFzcygnc3RpY2t5LXdyYXBwZXInKSkge1xuXHRcdFx0JCgnLmNvbnRhaW5lcl9fc2lkZS1zY3JvbGwnKS51bnN0aWNrKCk7XG5cdFx0fSBlbHNlIGlmICh3aW5kb3dXaWR0aCA+IDk2MCAmJiAkKCcuY29udGFpbmVyX19zaWRlLXNjcm9sbCcpLmdldCgwKSAmJiAhJCgnLmNvbnRhaW5lcl9fc2lkZS1zY3JvbGwnKS5wYXJlbnQoKS5oYXNDbGFzcygnc3RpY2t5LXdyYXBwZXInKSkge1xuXHRcdFx0c3RpY2t5U2lkZSgpO1xuXHRcdH1cblx0fSk7XG5cblx0Ly8g0KHQu9Cw0LnQtNC10YDRi1xuXHR2YXIgZGF0YVNsaWRlcnMgPSB7XG5cdFx0ZmVhdXR1cmVzOiB7XG5cdFx0XHRpdGVtczogNixcblx0XHRcdG5hdjogdHJ1ZVxuXHRcdH0sXG5cdFx0Z2FsbGVyeToge1xuXHRcdFx0aXRlbXM6IDEsXG5cdFx0XHRuYXY6IHRydWUsXG5cdFx0XHRkb3RzOiB0cnVlLFxuXHRcdFx0bW91c2VEcmFnOiBmYWxzZSxcblx0XHRcdHJlc3BvbnNpdmU6IHtcblx0XHRcdFx0OTYxOiB7XG5cdFx0XHRcdFx0aXRlbXM6IDQsXG5cdFx0XHRcdFx0ZG90czogZmFsc2Vcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0cHJvbW86IHtcblx0XHRcdGl0ZW1zOiAxLFxuXHRcdFx0ZG90czogdHJ1ZSxcblx0XHRcdGxvb3A6IHRydWUsXG5cdFx0XHRhdXRvcGxheTogdHJ1ZSxcblx0XHR9LFxuXHRcdHNob3A6IHtcblx0XHRcdGl0ZW1zOiAxLFxuXHRcdFx0bG9vcDogdHJ1ZSxcblx0XHRcdG5hdjogZmFsc2UsXG5cdFx0XHRjZW50ZXI6IGZhbHNlLFxuXHRcdFx0cmVzcG9uc2l2ZToge1xuXHRcdFx0XHQ2ODA6IHtcblx0XHRcdFx0XHRpdGVtczogMyxcblx0XHRcdFx0XHRjZW50ZXI6IHRydWUsXG5cdFx0XHRcdFx0bmF2OiB0cnVlLFxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0JCgnW2RhdGEtc2xpZGVyXScpLmVhY2goZnVuY3Rpb24oaSwgc2xpZGVyKSB7XG5cdFx0dmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoJ3NsaWRlcicpO1xuXG5cdFx0JChzbGlkZXIpLm93bENhcm91c2VsKGRhdGFTbGlkZXJzW2RhdGFdKVxuXHR9KTtcblxuXHQkKCcucmFuZ2VfX3NsaWRlcicpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHJhbmdlID0gdGhpcyxcblx0XHRcdFx0bWluSW5wdXQgPSAkKHJhbmdlKS5jbG9zZXN0KCcucmFuZ2UnKS5maW5kKCdbZGF0YS1pbnB1dD1cIm1pblwiXScpLFxuXHRcdFx0XHRtYXhJbnB1dCA9ICQocmFuZ2UpLmNsb3Nlc3QoJy5yYW5nZScpLmZpbmQoJ1tkYXRhLWlucHV0PVwibWF4XCJdJyk7XG5cblx0XHRmdW5jdGlvbiB1cGRhdGUoKSB7XG5cdFx0XHR2YXIgZnJvbSA9ICQocmFuZ2UpLmRhdGEoJ2Zyb20nKSxcblx0XHRcdFx0XHR0byA9ICQocmFuZ2UpLmRhdGEoJ3RvJyk7XG5cblx0XHRcdCQobWluSW5wdXQpLnZhbChmcm9tKTtcblx0XHRcdCQobWF4SW5wdXQpLnZhbCh0byk7XG5cdFx0fVxuXG5cdFx0JChyYW5nZSkuaW9uUmFuZ2VTbGlkZXIoe1xuXHRcdFx0ZXh0cmFfY2xhc3NlczogJ3JhbmdlX19zbGlkZXInLFxuXHRcdFx0aGlkZV9taW5fbWF4OiB0cnVlLFxuXHRcdFx0aGlkZV9mcm9tX3RvOiB0cnVlLFxuXHRcdH0pO1xuXG5cdFx0dXBkYXRlKCk7XG5cdFx0JChyYW5nZSkub24oJ2NoYW5nZScsIHVwZGF0ZSk7XG5cdH0pO1xuXG5cdCQoJ1tkYXRhLWlucHV0XScpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgcmFuZ2UgPSAkKHRoaXMpLmNsb3Nlc3QoJy5yYW5nZScpLmZpbmQoJ2lucHV0LnJhbmdlX19zbGlkZXInKS5kYXRhKFwiaW9uUmFuZ2VTbGlkZXJcIiksXG5cdFx0XHRcdHZhbCA9ICQodGhpcykudmFsKCksXG5cdFx0XHRcdG1pbiA9IHJhbmdlLm9wdGlvbnMubWluLFxuXHRcdFx0XHRtYXggPSByYW5nZS5vcHRpb25zLm1heCxcblx0XHRcdFx0ZnJvbSA9IHJhbmdlLm9wdGlvbnMuZnJvbSxcblx0XHRcdFx0dG8gPSByYW5nZS5vcHRpb25zLnRvLFxuXHRcdFx0XHRzdGVwID0gcmFuZ2Uub3B0aW9ucy5zdGVwO1xuXG5cdFx0c3dpdGNoICgkKHRoaXMpLmRhdGEoJ2lucHV0JykpIHtcblx0XHRcdGNhc2UgJ21pbic6XG5cdFx0XHRcdGlmICh2YWwgPD0gbWluKSB7XG5cdFx0XHRcdFx0dmFsID0gbWluO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHZhbCA+PSBtYXgpIHtcblx0XHRcdFx0XHR2YWwgPSBtYXggLSBzdGVwO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHZhbCA+PSB0bykge1xuXHRcdFx0XHRcdHZhbCA9IHRvIC0gc3RlcDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJhbmdlLnVwZGF0ZSh7XG5cdFx0XHRcdFx0ZnJvbTogdmFsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ21heCc6XG5cdFx0XHRcdGlmICh2YWwgPj0gbWF4KSB7XG5cdFx0XHRcdFx0dmFsID0gbWF4O1xuXHRcdFx0XHR9IGVsc2UgaWYgKHZhbCA8PSBtaW4pIHtcblx0XHRcdFx0XHR2YWwgPSBtaW4gKyBzdGVwO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHZhbCA8PSBmcm9tKSB7XG5cdFx0XHRcdFx0dmFsID0gZnJvbSArIHN0ZXA7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyYW5nZS51cGRhdGUoe1xuXHRcdFx0XHRcdHRvOiB2YWxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblxuXHRcdCQodGhpcykudmFsKHZhbCk7XG5cblx0fSk7XG5cblx0Ly8gZmllbGRzXG5cdGZ1bmN0aW9uIGZpbGxlZChmaWVsZCkge1xuXHRcdHZhciB2YWwgPSAkKGZpZWxkKS52YWwoKS50cmltKCk7XG5cblx0XHRpZiAodmFsLmxlbmd0aCA+IDApIHtcblx0XHRcdCQoZmllbGQpLmNsb3Nlc3QoJy5maWVsZCcpLmFkZENsYXNzKCdmaWVsZF9maWxsZWQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JChmaWVsZCkuY2xvc2VzdCgnLmZpZWxkJykucmVtb3ZlQ2xhc3MoJ2ZpZWxkX2ZpbGxlZCcpO1xuXHRcdH1cblx0fVxuXG5cdCQoJy5maWVsZCBpbnB1dCwgLmZpZWxkIHRleHRhcmVhJykuZWFjaChmdW5jdGlvbigpIHtcblx0XHRmaWxsZWQodGhpcyk7XG5cdH0pO1xuXG5cdCQoZG9jdW1lbnQpLm9uKCdrZXlkb3duJywgJy5maWVsZCBpbnB1dCwgLmZpZWxkIHRleHRhcmVhJywgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHQgPSB0aGlzO1xuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRmaWxsZWQodCk7XG5cdFx0fSwgMTAwKVxuXHR9KTtcblxuXG5cdCQoJy50b2dnbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKVxuXHRcdHZhciBjb250ZW50ID0gJCh0aGlzKS5wYXJlbnQoKS5maW5kKCQoJy4nKyQodGhpcykuZGF0YSgndG9nZ2xlJykpKTtcblx0XHQkKHRoaXMpLnRvZ2dsZUNsYXNzKCd0b2dnbGVfY2xvc2UnKTtcblx0XHQkKGNvbnRlbnQpLnN0b3AoKS5zbGlkZVRvZ2dsZSgzMDApO1xuXHR9KTtcblxuXHQkKCcuZmlsdGVyX19ibG9jay1jb250ZW50JykuZWFjaChmdW5jdGlvbihpLCBibG9jaykge1xuXHRcdHZhciBjaGVja3MgPSAkKGJsb2NrKS5maW5kKCcuY2hlY2tib3gnKS5sZW5ndGg7XG5cblx0XHRpZiAoY2hlY2tzID4gNSkge1xuXHRcdFx0JChibG9jaykuYWRkQ2xhc3MoJ2ZpbHRlcl9fYmxvY2stY29udGVudF9tb3JlJyk7XG5cdFx0XHQkKGJsb2NrKS5hcHBlbmQoJzxzcGFuIGNsYXNzPVwiZmlsdGVyX19ibG9jay1tb3JlXCI+0J/QvtC60LDQt9Cw0YLRjCDQstGB0LU8L3NwYW4+Jyk7XG5cdFx0fVxuXHR9KTtcblxuXHQkKCcuZmlsdGVyX19ibG9jay1tb3JlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnZmlsdGVyX19ibG9jay1jb250ZW50X21vcmUnKTtcblx0XHQkKHRoaXMpLnJlbW92ZSgpO1xuXHR9KTtcblxuXHQkKCcuZHJvcF9faXRlbScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdGlmICghJCh0aGlzKS5oYXNDbGFzcygnZHJvcF9faXRlbV9saW5rJykpIHtcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ2Ryb3BfX2l0ZW1fYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnZHJvcF9faXRlbV9hY3RpdmUnKTtcblx0XHR9XG5cblx0XHQkKHRoaXMpLmNsb3Nlc3QoJ1tkYXRhLWRyb3BdJykucmVtb3ZlQ2xhc3MoJ2Ryb3Atb3BlbicpO1xuXHR9KTtcblxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtZHJvcF0nLCBmdW5jdGlvbigpIHtcblxuXHRcdHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKCdkcm9wJyk7XG5cblx0XHRpZiAoZGF0YSA9PSAndHJpZ2dlcicpIHtcblx0XHRcdCQoJy5kcm9wLW9wZW4nKS5yZW1vdmVDbGFzcygnZHJvcC1vcGVuJyk7XG5cdFx0XHQkKHRoaXMpLnBhcmVudCgpLmNsb3Nlc3QoJ1tkYXRhLWRyb3BdJykuYWRkQ2xhc3MoJ2Ryb3Atb3BlbicpO1xuXHRcdH0gZWxzZSByZXR1cm47XG5cblx0fSk7XG5cblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXG5cdFx0dmFyIGRyb3AgPSAkKGUudGFyZ2V0KS5wYXJlbnQoKS5jbG9zZXN0KCdbZGF0YS1kcm9wXScpLmdldCgwKSxcblx0XHRcdFx0dGlwID0gJChlLnRhcmdldCkucGFyZW50KCkuY2xvc2VzdCgnLnRpcCcpLmdldCgwKTtcblxuXHRcdGlmICgkKGUudGFyZ2V0KS5oYXNDbGFzcygnY291bnRlcl9fYnRuX3BsdXMnKSkgcmV0dXJuO1xuXG5cdFx0aWYgKCFkcm9wKSB7XG5cdFx0XHQkKCcuZHJvcC1vcGVuJykucmVtb3ZlQ2xhc3MoJ2Ryb3Atb3BlbicpO1xuXHRcdH1cblxuXHRcdGlmICghdGlwKSB7XG5cdFx0XHQkKCcudGlwX19oaWRlY29udGVudCcpLmhpZGUoKTtcblx0XHRcdCQoJy5jb250YWluZXJfX21haW4nKS5jc3MoJ3otaW5kZXgnLCAnJyk7XG5cdFx0fVxuXG5cdH0pXG5cblx0JCgnLmRlc2NyaXB0aW9uX19zaG93Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5oaWRlKCk7XG5cdFx0JCgnLmRlc2NyaXB0aW9uX19zaG9ydCcpLmhpZGUoKTtcblx0XHQkKCcuZGVzY3JpcHRpb25fX2FsbCcpLnNob3coKTtcblx0fSk7XG5cblx0JCgnW2RhdGEtY2xvc2VdJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdCQodGhpcykucGFyZW50KCkuaGlkZSgpO1xuXHRcdCQodGhpcykuY2xvc2VzdCgnLmNhcmQnKS5jc3MoJ3otaW5kZXgnLCAnJyk7XG5cdH0pO1xuXG5cdCQoJy50aXBfX25hbWUnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHQkKCcudGlwJykuY3NzKCd6LWluZGV4JywgJycpO1xuXHRcdCQoJy5jb250YWluZXJfX21haW4nKS5jc3MoJ3otaW5kZXgnLCAnMycpO1xuXHRcdCQoJy5jYXJkJykuY3NzKCd6LWluZGV4JywgJycpO1xuXHRcdCQoJy50aXBfX2hpZGVjb250ZW50JykuaGlkZSgpO1xuXHRcdCQodGhpcykucGFyZW50KCkuZmluZCgnLnRpcF9faGlkZWNvbnRlbnQnKS5zaG93KCk7XG5cdFx0JCh0aGlzKS5jbG9zZXN0KCcuY2FyZCcpLmNzcygnei1pbmRleCcsICcyJyk7XG5cdFx0JCh0aGlzKS5jbG9zZXN0KCcudGlwJykuY3NzKCd6LWluZGV4JywgJzknKTtcblx0fSk7XG5cblx0JCgnLnRpcF9ob3ZlcicpLmhvdmVyKGZ1bmN0aW9uKCkge1xuXHRcdCQodGhpcykuZmluZCgnLnRpcF9faGlkZWNvbnRlbnQnKS5zaG93KCk7XG5cdH0sIGZ1bmN0aW9uKCkge1xuXHRcdCQoJy50aXBfX2hpZGVjb250ZW50JykuaGlkZSgpO1xuXHR9KTtcblxuXHQvLyBHYWxsZXJ5XG5cdCQoJy5nYWxsZXJ5X19lbGVtZW50Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cblx0XHRpZiAoJCh0aGlzKS5oYXNDbGFzcygnZ2FsbGVyeV9fZWxlbWVudF92aWRlbycpKSB7XG5cdFx0XHR2YXIgdmlkZW8gPSAkKHRoaXMpLmZpbmQoJ3ZpZGVvJykuY2xvbmUoKTtcblxuXHRcdFx0JCgnLm1vZGFsX3pvb20gLm1vZGFsX19jb250ZW50JykuaHRtbCh2aWRlbyk7XG5cblx0XHRcdCQoJy5tb2RhbF96b29tJykuaXppTW9kYWwoJ29wZW4nKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgaW1nID0gJCh0aGlzKS5maW5kKCdpbWcnKS5jbG9uZSgpO1xuXG5cdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5nYWxsZXJ5JykuZmluZCgnLmdhbGxlcnlfX3ZpZXcnKS5lbXB0eSgpLmFwcGVuZChpbWcpO1xuXG5cdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5nYWxsZXJ5X19saXN0JykuZmluZCgnLmdhbGxlcnlfX2VsZW1lbnRfYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2dhbGxlcnlfX2VsZW1lbnRfYWN0aXZlJyk7XG5cdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdnYWxsZXJ5X19lbGVtZW50X2FjdGl2ZScpO1xuXG5cdFx0XHQkKCcuZ2FsbGVyeV9fdmlldyBpbWcnKS5tYWduaWZ5KCk7XG5cdFx0fVxuXG5cdH0pO1xuXG5cdCQoJy52bGlzdF9mdWxsJykuZWFjaChmdW5jdGlvbihpLCBsaXN0KSB7XG5cdFx0dmFyIHNob3cgPSAkKGxpc3QpLmRhdGEoJ3Nob3cnKSxcblx0XHRcdFx0bGluZSA9ICQobGlzdCkuZmluZCgnLnZsaXN0X19saW5lOm5vdCgudmxpc3RfX2xpbmVfaGVhZCknKS5nZXQoc2hvdyk7XG5cblx0XHQkKGxpbmUpLmhpZGUoKS5uZXh0QWxsKCc6bm90KC52bGlzdF9fbGluZV9tb3JlKScpLmhpZGUoKTtcblx0fSk7XG5cblx0JCgnLnZsaXN0X19tb3JlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5jbG9zZXN0KCcudmxpc3QnKS50b2dnbGVDbGFzcygndmxpc3RfYWxsc2hvdycpO1xuXHR9KTtcblxuXHQvLyBNb2RhbFxuXG5cdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0JCgnW2RhdGEtbW9kYWxdJykuaXppTW9kYWwoe1xuXHRcdFx0b25DbG9zaW5nOiBmdW5jdGlvbihyKXtcblx0XHRcdFx0dmFyIHZpZGVvID0gci4kZWxlbWVudC5maW5kKCd2aWRlbycpLmdldCgwKTtcblxuXHRcdFx0XHRpZiAodmlkZW8pIHtcblx0XHRcdFx0XHR2aWRlby5wYXVzZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sIDEpXG5cblxuXHQkKCdbZGF0YS1vcGVuXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHR2YXIgbSA9ICQodGhpcykuZGF0YSgnb3BlbicpO1xuXHRcdCQoJ1tkYXRhLW1vZGFsPScrbSsnXScpLml6aU1vZGFsKCdvcGVuJyk7XG5cdH0pO1xuXG5cblx0JCgnLmdhbGxlcnlfX3ZpZXcsIC5zaG9wX19zbGlkZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpbWcgPSAkKHRoaXMpLmZpbmQoJ2ltZycpLmNsb25lKCk7XG5cblx0XHQkKCcubW9kYWxfem9vbSAubW9kYWxfX2NvbnRlbnQnKS5odG1sKGltZylcblxuXHRcdCQoJy5tb2RhbF96b29tJykuaXppTW9kYWwoJ29wZW4nKTtcblx0fSk7XG5cblxuXHQkKCcuZmlsdGVyLXRvZ2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdCQoJy5maWx0ZXIgLnRvZ2dsZTpub3QoLnRvZ2dsZV9jbG9zZSknKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdCQoJy5maWx0ZXInKS50b2dnbGUoKTtcblx0fSk7XG5cblx0JCgnLm0tbWVudV9fdG9nZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCEkKCcucGFnZScpLmhhc0NsYXNzKCdwYWdlX2ZyZWV6ZScpKSB7XG5cdFx0XHRjb25zdCBoID0gJCgnLm0tbWVudV9fY29udGVudCcpLmhlaWdodCgpO1xuXHRcdFx0JCgnLnBhZ2UnKS5hZGRDbGFzcygncGFnZV9mcmVlemUnKS5jc3MoJ2hlaWdodCcsIGgrJ3B4Jyk7XG5cdFx0XHQkKCdodG1sLGJvZHknKS5jc3MoJ292ZXJmbG93LXgnLCAnaGlkZGVuJyk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0JCgnLnBhZ2UnKS5yZW1vdmVDbGFzcygncGFnZV9mcmVlemUnKS5jc3MoJ2hlaWdodCcsICcnKTtcblx0XHRcdCQoJ2h0bWwsYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnJyk7XG5cdFx0fTtcblxuXHRcdCQod2luZG93KS5zY3JvbGxUb3AoMCk7XG5cblx0XHQkKCcubS1tZW51X19jb250ZW50JykudG9nZ2xlKCk7XG5cdH0pO1xuXG5cdCQoJy5tLW1lbnVfX2l0ZW1fZHJvcCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0dmFyIGRyb3AgPSAkKHRoaXMpLmZpbmQoJy5tLW1lbnVfX2Ryb3AnKS5maXJzdCgpLFxuXHRcdFx0XHRjYXRhbG9nID0gQm9vbGVhbigkKHRoaXMpLmNsb3Nlc3QoJy5tLW1lbnVfX2Ryb3BfY2F0YWxvZycpLmdldCgwKSkgfHwgQm9vbGVhbigkKHRoaXMpLmZpbmQoJy5tLW1lbnVfX2Ryb3BfY2F0YWxvZycpLmdldCgwKSk7XG5cblx0XHRpZiAoJChlLnRhcmdldCkucGFyZW50c1VudGlsKCcubS1tZW51X19pdGVtX2Ryb3AnKS5sZW5ndGggPD0gMSkge1xuXHRcdFx0JChkcm9wKS50b2dnbGVDbGFzcygnbS1tZW51X19kcm9wX3Nob3cnKTtcblxuXHRcdFx0aWYgKCFjYXRhbG9nKSB7XG5cdFx0XHRcdGNvbnN0IGggPSAkKCcubS1tZW51X19jb250ZW50JykuaGVpZ2h0KCk7XG5cdFx0XHRcdCQoJy5wYWdlJykuY3NzKCdoZWlnaHQnLCBoKTtcblx0XHRcdFx0cmV0dXJuXG5cdFx0XHR9XG5cblx0XHRcdGlmICgkKGRyb3ApLmhhc0NsYXNzKCdtLW1lbnVfX2Ryb3Bfc2hvdycpKSB7XG5cdFx0XHRcdGNvbnN0IGggPSAkKGRyb3ApLmZpbmQoJy5tLW1lbnVfX2xpc3QnKS5maXJzdCgpLmhlaWdodCgpO1xuXHRcdFx0XHQkKCcucGFnZScpLmNzcygnaGVpZ2h0JywgaCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCBoID0gJCh0aGlzKS5jbG9zZXN0KCcubS1tZW51X19saXN0JykuaGVpZ2h0KCk7XG5cdFx0XHRcdCQoJy5wYWdlJykuY3NzKCdoZWlnaHQnLCBoKTtcblxuXHRcdFx0fVxuXHRcdH1cblxuXHR9KTtcblxuXHQkKCcubS1tZW51X19iYWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5tLW1lbnVfX2Ryb3Bfc2hvdycpLnJlbW92ZUNsYXNzKCdtLW1lbnVfX2Ryb3Bfc2hvdycpO1xuXG5cdFx0Y29uc3QgaCA9ICQoJy5tLW1lbnVfX2NvbnRlbnQnKS5oZWlnaHQoKTtcblx0XHQkKCcucGFnZScpLmNzcygnaGVpZ2h0JywgaCk7XG5cdFx0cmV0dXJuXG5cdH0pO1xuXG5cdCQoJ1tkYXRhLXRhYnNdID4gKicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHR2YXIgZGF0YSA9ICQodGhpcykucGFyZW50KCkuZGF0YSgndGFicycpLFxuXHRcdFx0XHRpbmRleCA9ICQodGhpcykuaW5kZXgoKSxcblx0XHRcdFx0Y29udGVudCA9ICQoJ1tkYXRhLXRhYnMtY29udGVudD0nK2RhdGErJ10nKS5jaGlsZHJlbigpLmdldChpbmRleCk7XG5cblx0XHQkKGNvbnRlbnQpLnNob3coKS5zaWJsaW5ncygpLmhpZGUoKTtcblxuXHRcdGlmICghY29udGVudCkge1xuXHRcdFx0JCgnW2RhdGEtdGFicy1jb250ZW50PScrZGF0YSsnXScpLmNoaWxkcmVuKCkuaGlkZSgpO1xuXHRcdH1cblxuXHRcdCQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHR9KTtcblxuXHQkKCcudmlkZW8nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgaWQgPSAkKHRoaXMpLmRhdGEoJ2lkJyk7XG5cblx0XHQkKCcjJytpZCkuaXppTW9kYWwoJ29wZW4nKTtcblx0fSk7XG5cblx0JCgnLmNoZWNrYm94IGlucHV0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5jaGVja2JveCcpLnRvZ2dsZUNsYXNzKCdjaGVja2JveF9hY3RpdmUnKTtcblx0fSk7XG5cblx0dmFyIHNjcm9sbGluZyxcblx0XHRcdHRvVG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvLXRvcCcpO1xuXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uKGUpIHtcblx0XHQgc2Nyb2xsaW5nID0gKHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCkgIC0gKGRvY3VtZW50LmJvZHkuY2xpZW50VG9wIHx8IDApO1xuXG5cdFx0IGlmICgkKGUudGFyZ2V0KS5jbG9zZXN0KCcucmVzdWx0cycpLmdldCgwKSkgcmV0dXJuO1xuXG5cdFx0IGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDk2MCkge1xuXHRcdFx0IGlmIChzY3JvbGxpbmcgPj0gMjAwKSB7XG5cdFx0XHRcdCAkKCcuaGVhZGVyX19maXgnKS5hZGRDbGFzcygnaGVhZGVyX19maXhfc2hvdycpO1xuXHRcdFx0XHQgJCgnLnJlc3VsdHMnKS5hcHBlbmRUbygnLmhlYWRlcl9fZml4IC5zZWFyY2gnKTtcblx0XHRcdCB9IGVsc2UgaWYgKCQoJy5oZWFkZXJfX2ZpeCcpLmhhc0NsYXNzKCdoZWFkZXJfX2ZpeF9zaG93JykpIHtcblx0XHRcdFx0ICQoJy5oZWFkZXJfX2ZpeCcpLnJlbW92ZUNsYXNzKCdoZWFkZXJfX2ZpeF9zaG93Jyk7XG5cdFx0XHRcdCAkKCcucmVzdWx0cycpLmFwcGVuZFRvKCcuaGVhZGVyX19ib2R5IC5zZWFyY2gnKTtcblx0XHRcdCB9XG5cdFx0IH0gZWxzZSB7XG5cdFx0XHQgaWYgKHNjcm9sbGluZyA+PSAzMSAmJiAhJCgnLnBhZ2UnKS5oYXNDbGFzcygncGFnZV9mcmVlemUnKSkge1xuXHRcdFx0XHQgJCgnLmhlYWRlcl9fbW9iaWxlJykuYWRkQ2xhc3MoJ2hlYWRlcl9fbW9iaWxlX2ZpeCcpO1xuXHRcdFx0IH0gZWxzZSBpZiAoJCgnLmhlYWRlcl9fbW9iaWxlJykuaGFzQ2xhc3MoJ2hlYWRlcl9fbW9iaWxlX2ZpeCcpKSB7XG5cdFx0XHRcdCAkKCcuaGVhZGVyX19tb2JpbGUnKS5yZW1vdmVDbGFzcygnaGVhZGVyX19tb2JpbGVfZml4Jyk7XG5cdFx0XHQgfVxuXG5cdFx0IH1cblxuXHRcdCBpZiAoc2Nyb2xsaW5nID49IDEwMDAgJiYgd2luZG93V2lkdGggPiA5NjApIHtcblx0XHRcdCB0b1RvcC5jbGFzc0xpc3QuYWRkKCd0by10b3Bfc2hvdycpO1xuXHRcdCB9IGVsc2Uge1xuXHRcdFx0IHRvVG9wLmNsYXNzTGlzdC5yZW1vdmUoJ3RvLXRvcF9zaG93Jyk7XG5cdFx0IH1cblx0fSwgdHJ1ZSk7XG5cblx0JCgnLnRvLXRvcCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdCQoXCJodG1sLCBib2R5XCIpLnN0b3AoKS5hbmltYXRlKHtzY3JvbGxUb3A6MH0sIDUwMCwgJ3N3aW5nJyk7XG5cdH0pO1xuXG5cdCQoJy5jb3VudGVyX19idG5fcGx1cycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHQkKCcuY2FyZCcpLmNzcygnei1pbmRleCcsICcnKTtcblxuXHRcdCQoJy50aXBfX2hpZGVjb250ZW50JykuaGlkZSgpO1xuXHRcdCQoJy50aXAnKS5jc3MoJ3otaW5kZXgnLCAnJyk7XG5cdFx0JCh0aGlzKS5wYXJlbnQoKS5maW5kKCcudGlwX19oaWRlY29udGVudCcpLmZpcnN0KCkuc2hvdygpO1xuXHRcdCQodGhpcykuY2xvc2VzdCgnLmNhcmQnKS5jc3MoJ3otaW5kZXgnLCAnNScpO1xuXHRcdCQodGhpcykucGFyZW50KCkuZmluZCgnLnRpcCcpLmNzcygnei1pbmRleCcsICc5Jyk7XG5cblx0XHRpZiAoJCgnLmNvbnRhaW5lcl9fc2lkZScpLmdldCgwKSkge1xuXHRcdFx0JCgnLmNvbnRhaW5lcl9fbWFpbicpLmNzcygnei1pbmRleCcsICczJyk7XG5cdFx0fVxuXHR9KTtcblxuXHQvLyBzZWFyY2hcblx0JCgnLnNlYXJjaF9fZmllbGQgaW5wdXQnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5zZWFyY2gnKS5hZGRDbGFzcygnc2VhcmNoX2ZvY3VzJyk7XG5cdFx0JCgnLnBhZ2UnKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJmYWRlLWJnXCI+PC9kaXY+Jyk7XG5cdH0pO1xuXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZmFkZS1iZycsIGZ1bmN0aW9uKGUpIHtcblx0XHQkKCcuc2VhcmNoJykucmVtb3ZlQ2xhc3MoJ3NlYXJjaF9mb2N1cycpO1xuXHRcdCQodGhpcykucmVtb3ZlKClcblx0fSk7XG5cblx0JCgnYnV0dG9uLmJ0biwgLmNvdW50ZXJfX2J0biwgLmNsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0fSlcblxuXHQkKCdhW2hyZWZePVwiI1wiXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0dmFyIGlkID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG5cbiAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgIHNjcm9sbFRvcDogJChpZCkub2Zmc2V0KCkudG9wICsgJCgnYm9keScpLnNjcm9sbFRvcCgpIC0gODBcbiAgICB9LCAxMDAwKTtcblxuXHR9KTtcblxuXHQkKCcuZHJvcCAuY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5kcm9wLW9wZW4nKS5yZW1vdmVDbGFzcygnZHJvcC1vcGVuJyk7XG5cdH0pXG5cblx0dmFyIGhlaWdodEJvdHRvbVNjcm9sbCA9IDA7XG5cblx0JCgnLnBhZ2VfX2NvbnRlbnQnKS5uZXh0QWxsKCkuZWFjaChmdW5jdGlvbihpLCBlbCkge1xuXHRcdGhlaWdodEJvdHRvbVNjcm9sbCArPSAkKGVsKS5oZWlnaHQoKTtcblx0fSk7XG5cblx0Ly8gc3RpY2t5IGNhcnQgc2lkZVxuXG5cdGZ1bmN0aW9uIHN0aWNreVNpZGUoKSB7XG5cdFx0JCgnLmNvbnRhaW5lcl9fc2lkZS1zY3JvbGwnKS5zdGlja3koe1xuXHRcdFx0dG9wU3BhY2luZzogODAsXG5cdFx0XHRib3R0b21TcGFjaW5nOiAkKCcuZm9vdGVyJykuaGVpZ2h0KCkgKyAkKCcuY29udGFpbmVyX19zaWRlLXNjcm9sbCcpLm9mZnNldCgpLnRvcFxuXHRcdH0pO1xuXHR9XG5cblx0aWYgKHdpbmRvd1dpZHRoID4gOTYwICYmICQoJy5jb250YWluZXJfX3NpZGUtc2Nyb2xsJykuZ2V0KDApKSBzdGlja3lTaWRlKCk7XG5cblx0aW5pdCgpO1xuXG5cbn0pKHdpbmRvdyk7XG4iXX0=
