'use strict';

(function (root) {

	// Инициализация прилдожения
	var windowWidth = $(window).width();

	function init() {

		if ($('.gallery').get(0)) {
			$('.gallery__element').first().trigger('click');
		}

		$('[data-tabs]').each(function (i, tabs) {
			$(tabs).children().first().trigger('click');
		});

		$('.toggle_close').each(function (i, toggle) {
			var data = $(this).data('toggle');

			$(this).parent().find('.' + data).hide();
		});
	};

	$(window).on('resize', function () {
		windowWidth = $(window).width();
	});

	// Слайдеры
	var dataSliders = {
		feautures: {
			items: 6,
			nav: true
		},
		gallery: {
			items: 1,
			nav: true,
			dots: true,
			mouseDrag: false,
			responsive: {
				961: {
					items: 4,
					dots: false
				}
			}
		},
		promo: {
			items: 1,
			dots: true,
			loop: true,
			autoplay: true
		}
	};

	$('[data-slider]').each(function (i, slider) {
		var data = $(this).data('slider');

		$(slider).owlCarousel(dataSliders[data]);
	});

	$('.range__slider').each(function () {
		var range = this,
		    minInput = $(range).closest('.range').find('[data-input="min"]'),
		    maxInput = $(range).closest('.range').find('[data-input="max"]');

		function update() {
			var from = $(range).data('from'),
			    to = $(range).data('to');

			$(minInput).val(from);
			$(maxInput).val(to);
		}

		$(range).ionRangeSlider({
			extra_classes: 'range__slider',
			hide_min_max: true,
			hide_from_to: true
		});

		update();
		$(range).on('change', update);
	});

	$('[data-input]').on('change', function () {
		var range = $(this).closest('.range').find('input.range__slider').data("ionRangeSlider"),
		    val = $(this).val(),
		    min = range.options.min,
		    max = range.options.max,
		    from = range.options.from,
		    to = range.options.to,
		    step = range.options.step;

		switch ($(this).data('input')) {
			case 'min':
				if (val <= min) {
					val = min;
				} else if (val >= max) {
					val = max - step;
				} else if (val >= to) {
					val = to - step;
				}

				range.update({
					from: val
				});
				break;
			case 'max':
				if (val >= max) {
					val = max;
				} else if (val <= min) {
					val = min + step;
				} else if (val <= from) {
					val = from + step;
				}

				range.update({
					to: val
				});
				break;
		}

		$(this).val(val);
	});

	// fields
	function filled(field) {
		var val = $(field).val().trim();

		if (val.length > 0) {
			$(field).closest('.field').addClass('field_filled');
		} else {
			$(field).closest('.field').removeClass('field_filled');
		}
	}

	$('.field input, .field textarea').each(function () {
		filled(this);
	});

	$(document).on('keydown', '.field input, .field textarea', function () {
		var t = this;
		setTimeout(function () {
			filled(t);
		}, 100);
	});

	$('.toggle').on('click', function (e) {
		e.stopPropagation();
		var content = $(this).parent().find($('.' + $(this).data('toggle')));
		$(this).toggleClass('toggle_close');
		$(content).stop().slideToggle(300);
	});

	$('.filter__block-content').each(function (i, block) {
		var checks = $(block).find('.checkbox').length;

		if (checks > 5) {
			$(block).addClass('filter__block-content_more');
			$(block).append('<span class="filter__block-more">Показать все</span>');
		}
	});

	$('.filter__block-more').on('click', function () {
		$(this).parent().removeClass('filter__block-content_more');
		$(this).remove();
	});

	$('.drop__item').on('click', function () {
		if (!$(this).hasClass('drop__item_link')) {
			$(this).addClass('drop__item_active').siblings().removeClass('drop__item_active');
		}

		$(this).closest('[data-drop]').removeClass('drop-open');
	});

	$(document).on('click', '[data-drop]', function () {

		var data = $(this).data('drop');

		if (data == 'trigger') {
			$('.drop-open').removeClass('drop-open');
			$(this).parent().closest('[data-drop]').addClass('drop-open');
		} else return;
	});

	$(document).on('click', function (e) {

		var drop = $(e.target).parent().closest('[data-drop]').get(0),
		    tip = $(e.target).parent().closest('.tip').get(0);

		if ($(e.target).hasClass('counter__btn_plus')) return;

		if (!drop) {
			$('.drop-open').removeClass('drop-open');
		}

		if (!tip) {
			$('.tip__hidecontent').hide();
			$('.container__main').css('z-index', '');
		}
	});

	$('.description__show').on('click', function () {
		$(this).hide();
		$('.description__short').hide();
		$('.description__all').show();
	});

	$('[data-close]').on('click', function (e) {
		e.preventDefault();

		$(this).parent().hide();
		$(this).closest('.card').css('z-index', '');
	});

	$('.tip__name').on('click', function () {
		$('.container__main').css('z-index', '3');
		$('.card').css('z-index', '');
		$('.tip__hidecontent').hide();
		$(this).parent().find('.tip__hidecontent').show();
		$(this).closest('.card').css('z-index', '2');
	});

	$('.tip_hover').hover(function () {
		$(this).find('.tip__hidecontent').show();
	}, function () {
		$('.tip__hidecontent').hide();
	});

	// Gallery
	$('.gallery__element').on('click', function () {

		if ($(this).hasClass('gallery__element_video')) {
			var video = $(this).find('video').clone();

			$('.modal_zoom .modal__content').html(video);

			$('.modal_zoom').iziModal('open');
		} else {
			var img = $(this).find('img').clone();

			$(this).closest('.gallery').find('.gallery__view').empty().append(img);

			$(this).closest('.gallery__list').find('.gallery__element_active').removeClass('gallery__element_active');
			$(this).addClass('gallery__element_active');
		}
	});

	$('.vlist_full').each(function (i, list) {
		var show = $(list).data('show'),
		    line = $(list).find('.vlist__line:not(.vlist__line_head)').get(show);

		$(line).hide().nextAll(':not(.vlist__line_more)').hide();
	});

	$('.vlist__more').on('click', function () {
		$(this).closest('.vlist').toggleClass('vlist_allshow');
	});

	// Modal

	setTimeout(function () {
		$('[data-modal]').iziModal({
			onClosing: function onClosing(r) {
				var video = r.$element.find('video').get(0);

				if (video) {
					video.pause();
				}
			}
		});
	}, 1);

	$('[data-open]').on('click', function (e) {
		e.preventDefault();

		var m = $(this).data('open');
		$('[data-modal=' + m + ']').iziModal('open');
	});

	$('.gallery__view').on('click', function () {
		var img = $(this).find('img').clone();

		$('.modal_zoom .modal__content').html(img);

		$('.modal_zoom').iziModal('open');
	});

	$('.filter-toggle').on('click', function () {
		$('.filter .toggle:not(.toggle_close)').trigger('click');
		$('.filter').toggle();
	});

	$('.m-menu__toggle').on('click', function () {
		$('.m-menu__content').toggle();
	});

	$('.m-menu__item_drop').on('click', function (e) {
		e.stopPropagation();

		var drop = $(this).find('.m-menu__drop').first();

		if ($(e.target).parentsUntil('.m-menu__item_drop').length <= 1) {
			$(drop).toggleClass('m-menu__drop_show');
		}
	});

	$('.m-menu__back').on('click', function (e) {
		e.stopPropagation();

		$(this).closest('.m-menu__drop_show').removeClass('m-menu__drop_show');
	});

	$('[data-tabs] > *').on('click', function (e) {
		e.preventDefault();

		var data = $(this).parent().data('tabs'),
		    index = $(this).index(),
		    content = $('[data-tabs-content=' + data + ']').children().get(index);

		$(content).show().siblings().hide();

		if (!content) {
			$('[data-tabs-content=' + data + ']').children().hide();
		}

		$(this).addClass('active').siblings().removeClass('active');
	});

	// if ($('.modal_video').get(0)) {
	// 	$(".modal_video").iziModal({
	// 		history: false,
	// 		iframe : true,
	// 		fullscreen: true,
	// 		headerColor: '#000000',
	// 		group: 'group1',
	// 		loop: true
	// 	});
	// }


	$('.video').on('click', function () {
		var id = $(this).data('id');

		$('#' + id).iziModal('open');
	});

	$('.checkbox input').on('click', function (e) {
		e.stopPropagation();

		$(this).closest('.checkbox').toggleClass('checkbox_active');
	});

	var scrolling,
	    toTop = document.querySelector('.to-top');

	document.addEventListener('scroll', function (e) {
		scrolling = document.body.scrollTop;

		if ($(e.target).closest('.results').get(0)) return;

		if (scrolling >= 200) {
			$('.header__fix').addClass('header__fix_show');
			$('.results').appendTo('.header__fix .search');
		} else if ($('.header__fix').hasClass('header__fix_show')) {
			$('.header__fix').removeClass('header__fix_show');
			$('.results').appendTo('.header__body .search');
		}

		if (scrolling >= 1000 && windowWidth > 960) {
			toTop.classList.add('to-top_show');
		} else {
			toTop.classList.remove('to-top_show');
		}
	}, true);

	$('.to-top').on('click', function () {
		$("html, body").stop().animate({ scrollTop: 0 }, 500, 'swing');
	});

	$('.counter__btn_plus').on('click', function (e) {
		e.preventDefault();

		$('.tip__hidecontent').hide();
		$(this).parent().find('.tip__hidecontent').first().show();
	});

	// search
	$('.search__field input').focus(function () {
		$(this).closest('.search').addClass('search_focus');
	});

	$('.search__field input').focusout(function () {
		$(this).closest('.search').removeClass('search_focus');
	});

	init();
})(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJyb290Iiwid2luZG93V2lkdGgiLCIkIiwid2luZG93Iiwid2lkdGgiLCJpbml0IiwiZ2V0IiwiZmlyc3QiLCJ0cmlnZ2VyIiwiZWFjaCIsImkiLCJ0YWJzIiwiY2hpbGRyZW4iLCJ0b2dnbGUiLCJkYXRhIiwicGFyZW50IiwiZmluZCIsImhpZGUiLCJvbiIsImRhdGFTbGlkZXJzIiwiZmVhdXR1cmVzIiwiaXRlbXMiLCJuYXYiLCJnYWxsZXJ5IiwiZG90cyIsIm1vdXNlRHJhZyIsInJlc3BvbnNpdmUiLCJwcm9tbyIsImxvb3AiLCJhdXRvcGxheSIsInNsaWRlciIsIm93bENhcm91c2VsIiwicmFuZ2UiLCJtaW5JbnB1dCIsImNsb3Nlc3QiLCJtYXhJbnB1dCIsInVwZGF0ZSIsImZyb20iLCJ0byIsInZhbCIsImlvblJhbmdlU2xpZGVyIiwiZXh0cmFfY2xhc3NlcyIsImhpZGVfbWluX21heCIsImhpZGVfZnJvbV90byIsIm1pbiIsIm9wdGlvbnMiLCJtYXgiLCJzdGVwIiwiZmlsbGVkIiwiZmllbGQiLCJ0cmltIiwibGVuZ3RoIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImRvY3VtZW50IiwidCIsInNldFRpbWVvdXQiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiY29udGVudCIsInRvZ2dsZUNsYXNzIiwic3RvcCIsInNsaWRlVG9nZ2xlIiwiYmxvY2siLCJjaGVja3MiLCJhcHBlbmQiLCJyZW1vdmUiLCJoYXNDbGFzcyIsInNpYmxpbmdzIiwiZHJvcCIsInRhcmdldCIsInRpcCIsImNzcyIsInNob3ciLCJwcmV2ZW50RGVmYXVsdCIsImhvdmVyIiwidmlkZW8iLCJjbG9uZSIsImh0bWwiLCJpemlNb2RhbCIsImltZyIsImVtcHR5IiwibGlzdCIsImxpbmUiLCJuZXh0QWxsIiwib25DbG9zaW5nIiwiciIsIiRlbGVtZW50IiwicGF1c2UiLCJtIiwicGFyZW50c1VudGlsIiwiaW5kZXgiLCJpZCIsInNjcm9sbGluZyIsInRvVG9wIiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJib2R5Iiwic2Nyb2xsVG9wIiwiYXBwZW5kVG8iLCJjbGFzc0xpc3QiLCJhZGQiLCJhbmltYXRlIiwiZm9jdXMiLCJmb2N1c291dCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxDQUFDLFVBQVNBLElBQVQsRUFBZTs7QUFFZjtBQUNBLEtBQUlDLGNBQWNDLEVBQUVDLE1BQUYsRUFBVUMsS0FBVixFQUFsQjs7QUFFQSxVQUFTQyxJQUFULEdBQWdCOztBQUVmLE1BQUlILEVBQUUsVUFBRixFQUFjSSxHQUFkLENBQWtCLENBQWxCLENBQUosRUFBMEI7QUFDekJKLEtBQUUsbUJBQUYsRUFBdUJLLEtBQXZCLEdBQStCQyxPQUEvQixDQUF1QyxPQUF2QztBQUNBOztBQUVETixJQUFFLGFBQUYsRUFBaUJPLElBQWpCLENBQXNCLFVBQVNDLENBQVQsRUFBWUMsSUFBWixFQUFrQjtBQUN2Q1QsS0FBRVMsSUFBRixFQUFRQyxRQUFSLEdBQW1CTCxLQUFuQixHQUEyQkMsT0FBM0IsQ0FBbUMsT0FBbkM7QUFDQSxHQUZEOztBQUlBTixJQUFFLGVBQUYsRUFBbUJPLElBQW5CLENBQXdCLFVBQVNDLENBQVQsRUFBWUcsTUFBWixFQUFvQjtBQUMzQyxPQUFJQyxPQUFPWixFQUFFLElBQUYsRUFBUVksSUFBUixDQUFhLFFBQWIsQ0FBWDs7QUFFQVosS0FBRSxJQUFGLEVBQVFhLE1BQVIsR0FBaUJDLElBQWpCLENBQXNCLE1BQUlGLElBQTFCLEVBQWdDRyxJQUFoQztBQUNBLEdBSkQ7QUFLQTs7QUFFRGYsR0FBRUMsTUFBRixFQUFVZSxFQUFWLENBQWEsUUFBYixFQUF1QixZQUFXO0FBQ2pDakIsZ0JBQWNDLEVBQUVDLE1BQUYsRUFBVUMsS0FBVixFQUFkO0FBQ0EsRUFGRDs7QUFJQTtBQUNBLEtBQUllLGNBQWM7QUFDakJDLGFBQVc7QUFDVkMsVUFBTyxDQURHO0FBRVZDLFFBQUs7QUFGSyxHQURNO0FBS2pCQyxXQUFTO0FBQ1JGLFVBQU8sQ0FE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VztBQUM3Q3RHLElBQUUsSUFBRixFQUFRZ0MsT0FBUixDQUFnQixTQUFoQixFQUEyQm1CLFdBQTNCLENBQXVDLGNBQXZDO0FBQ0EsRUFGRDs7QUFJQWhEO0FBRUEsQ0F2WkQsRUF1WkdGLE1BdlpIIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihyb290KSB7XG5cblx0Ly8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/RgNC40LvQtNC+0LbQtdC90LjRj1xuXHR2YXIgd2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcblxuXHRmdW5jdGlvbiBpbml0KCkge1xuXG5cdFx0aWYgKCQoJy5nYWxsZXJ5JykuZ2V0KDApKSB7XG5cdFx0XHQkKCcuZ2FsbGVyeV9fZWxlbWVudCcpLmZpcnN0KCkudHJpZ2dlcignY2xpY2snKTtcblx0XHR9XG5cblx0XHQkKCdbZGF0YS10YWJzXScpLmVhY2goZnVuY3Rpb24oaSwgdGFicykge1xuXHRcdFx0JCh0YWJzKS5jaGlsZHJlbigpLmZpcnN0KCkudHJpZ2dlcignY2xpY2snKTtcblx0XHR9KTtcblxuXHRcdCQoJy50b2dnbGVfY2xvc2UnKS5lYWNoKGZ1bmN0aW9uKGksIHRvZ2dsZSkge1xuXHRcdFx0dmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoJ3RvZ2dsZScpO1xuXG5cdFx0XHQkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy4nK2RhdGEpLmhpZGUoKTtcblx0XHR9KTtcblx0fTtcblxuXHQkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXHRcdHdpbmRvd1dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG5cdH0pO1xuXG5cdC8vINCh0LvQsNC50LTQtdGA0Ytcblx0dmFyIGRhdGFTbGlkZXJzID0ge1xuXHRcdGZlYXV0dXJlczoge1xuXHRcdFx0aXRlbXM6IDYsXG5cdFx0XHRuYXY6IHRydWVcblx0XHR9LFxuXHRcdGdhbGxlcnk6IHtcblx0XHRcdGl0ZW1zOiAxLFxuXHRcdFx0bmF2OiB0cnVlLFxuXHRcdFx0ZG90czogdHJ1ZSxcblx0XHRcdG1vdXNlRHJhZzogZmFsc2UsXG5cdFx0XHRyZXNwb25zaXZlOiB7XG5cdFx0XHRcdDk2MToge1xuXHRcdFx0XHRcdGl0ZW1zOiA0LFxuXHRcdFx0XHRcdGRvdHM6IGZhbHNlXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdHByb21vOiB7XG5cdFx0XHRpdGVtczogMSxcblx0XHRcdGRvdHM6IHRydWUsXG5cdFx0XHRsb29wOiB0cnVlLFxuXHRcdFx0YXV0b3BsYXk6IHRydWUsXG5cdFx0fVxuXHR9XG5cblx0JCgnW2RhdGEtc2xpZGVyXScpLmVhY2goZnVuY3Rpb24oaSwgc2xpZGVyKSB7XG5cdFx0dmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoJ3NsaWRlcicpO1xuXG5cdFx0JChzbGlkZXIpLm93bENhcm91c2VsKGRhdGFTbGlkZXJzW2RhdGFdKVxuXHR9KTtcblxuXHQkKCcucmFuZ2VfX3NsaWRlcicpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHJhbmdlID0gdGhpcyxcblx0XHRcdFx0bWluSW5wdXQgPSAkKHJhbmdlKS5jbG9zZXN0KCcucmFuZ2UnKS5maW5kKCdbZGF0YS1pbnB1dD1cIm1pblwiXScpLFxuXHRcdFx0XHRtYXhJbnB1dCA9ICQocmFuZ2UpLmNsb3Nlc3QoJy5yYW5nZScpLmZpbmQoJ1tkYXRhLWlucHV0PVwibWF4XCJdJyk7XG5cblx0XHRmdW5jdGlvbiB1cGRhdGUoKSB7XG5cdFx0XHR2YXIgZnJvbSA9ICQocmFuZ2UpLmRhdGEoJ2Zyb20nKSxcblx0XHRcdFx0XHR0byA9ICQocmFuZ2UpLmRhdGEoJ3RvJyk7XG5cblx0XHRcdCQobWluSW5wdXQpLnZhbChmcm9tKTtcblx0XHRcdCQobWF4SW5wdXQpLnZhbCh0byk7XG5cdFx0fVxuXG5cdFx0JChyYW5nZSkuaW9uUmFuZ2VTbGlkZXIoe1xuXHRcdFx0ZXh0cmFfY2xhc3NlczogJ3JhbmdlX19zbGlkZXInLFxuXHRcdFx0aGlkZV9taW5fbWF4OiB0cnVlLFxuXHRcdFx0aGlkZV9mcm9tX3RvOiB0cnVlLFxuXHRcdH0pO1xuXG5cdFx0dXBkYXRlKCk7XG5cdFx0JChyYW5nZSkub24oJ2NoYW5nZScsIHVwZGF0ZSk7XG5cdH0pO1xuXG5cdCQoJ1tkYXRhLWlucHV0XScpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgcmFuZ2UgPSAkKHRoaXMpLmNsb3Nlc3QoJy5yYW5nZScpLmZpbmQoJ2lucHV0LnJhbmdlX19zbGlkZXInKS5kYXRhKFwiaW9uUmFuZ2VTbGlkZXJcIiksXG5cdFx0XHRcdHZhbCA9ICQodGhpcykudmFsKCksXG5cdFx0XHRcdG1pbiA9IHJhbmdlLm9wdGlvbnMubWluLFxuXHRcdFx0XHRtYXggPSByYW5nZS5vcHRpb25zLm1heCxcblx0XHRcdFx0ZnJvbSA9IHJhbmdlLm9wdGlvbnMuZnJvbSxcblx0XHRcdFx0dG8gPSByYW5nZS5vcHRpb25zLnRvLFxuXHRcdFx0XHRzdGVwID0gcmFuZ2Uub3B0aW9ucy5zdGVwO1xuXG5cdFx0c3dpdGNoICgkKHRoaXMpLmRhdGEoJ2lucHV0JykpIHtcblx0XHRcdGNhc2UgJ21pbic6XG5cdFx0XHRcdGlmICh2YWwgPD0gbWluKSB7XG5cdFx0XHRcdFx0dmFsID0gbWluO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHZhbCA+PSBtYXgpIHtcblx0XHRcdFx0XHR2YWwgPSBtYXggLSBzdGVwO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHZhbCA+PSB0bykge1xuXHRcdFx0XHRcdHZhbCA9IHRvIC0gc3RlcDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJhbmdlLnVwZGF0ZSh7XG5cdFx0XHRcdFx0ZnJvbTogdmFsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ21heCc6XG5cdFx0XHRcdGlmICh2YWwgPj0gbWF4KSB7XG5cdFx0XHRcdFx0dmFsID0gbWF4O1xuXHRcdFx0XHR9IGVsc2UgaWYgKHZhbCA8PSBtaW4pIHtcblx0XHRcdFx0XHR2YWwgPSBtaW4gKyBzdGVwO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHZhbCA8PSBmcm9tKSB7XG5cdFx0XHRcdFx0dmFsID0gZnJvbSArIHN0ZXA7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyYW5nZS51cGRhdGUoe1xuXHRcdFx0XHRcdHRvOiB2YWxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblxuXHRcdCQodGhpcykudmFsKHZhbCk7XG5cblx0fSk7XG5cblx0Ly8gZmllbGRzXG5cdGZ1bmN0aW9uIGZpbGxlZChmaWVsZCkge1xuXHRcdHZhciB2YWwgPSAkKGZpZWxkKS52YWwoKS50cmltKCk7XG5cblx0XHRpZiAodmFsLmxlbmd0aCA+IDApIHtcblx0XHRcdCQoZmllbGQpLmNsb3Nlc3QoJy5maWVsZCcpLmFkZENsYXNzKCdmaWVsZF9maWxsZWQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JChmaWVsZCkuY2xvc2VzdCgnLmZpZWxkJykucmVtb3ZlQ2xhc3MoJ2ZpZWxkX2ZpbGxlZCcpO1xuXHRcdH1cblx0fVxuXG5cdCQoJy5maWVsZCBpbnB1dCwgLmZpZWxkIHRleHRhcmVhJykuZWFjaChmdW5jdGlvbigpIHtcblx0XHRmaWxsZWQodGhpcyk7XG5cdH0pO1xuXG5cdCQoZG9jdW1lbnQpLm9uKCdrZXlkb3duJywgJy5maWVsZCBpbnB1dCwgLmZpZWxkIHRleHRhcmVhJywgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHQgPSB0aGlzO1xuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRmaWxsZWQodCk7XG5cdFx0fSwgMTAwKVxuXHR9KTtcblxuXG5cdCQoJy50b2dnbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKVxuXHRcdHZhciBjb250ZW50ID0gJCh0aGlzKS5wYXJlbnQoKS5maW5kKCQoJy4nKyQodGhpcykuZGF0YSgndG9nZ2xlJykpKTtcblx0XHQkKHRoaXMpLnRvZ2dsZUNsYXNzKCd0b2dnbGVfY2xvc2UnKTtcblx0XHQkKGNvbnRlbnQpLnN0b3AoKS5zbGlkZVRvZ2dsZSgzMDApO1xuXHR9KTtcblxuXHQkKCcuZmlsdGVyX19ibG9jay1jb250ZW50JykuZWFjaChmdW5jdGlvbihpLCBibG9jaykge1xuXHRcdHZhciBjaGVja3MgPSAkKGJsb2NrKS5maW5kKCcuY2hlY2tib3gnKS5sZW5ndGg7XG5cblx0XHRpZiAoY2hlY2tzID4gNSkge1xuXHRcdFx0JChibG9jaykuYWRkQ2xhc3MoJ2ZpbHRlcl9fYmxvY2stY29udGVudF9tb3JlJyk7XG5cdFx0XHQkKGJsb2NrKS5hcHBlbmQoJzxzcGFuIGNsYXNzPVwiZmlsdGVyX19ibG9jay1tb3JlXCI+0J/QvtC60LDQt9Cw0YLRjCDQstGB0LU8L3NwYW4+Jyk7XG5cdFx0fVxuXHR9KTtcblxuXHQkKCcuZmlsdGVyX19ibG9jay1tb3JlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnZmlsdGVyX19ibG9jay1jb250ZW50X21vcmUnKTtcblx0XHQkKHRoaXMpLnJlbW92ZSgpO1xuXHR9KTtcblxuXHQkKCcuZHJvcF9faXRlbScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdGlmICghJCh0aGlzKS5oYXNDbGFzcygnZHJvcF9faXRlbV9saW5rJykpIHtcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ2Ryb3BfX2l0ZW1fYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnZHJvcF9faXRlbV9hY3RpdmUnKTtcblx0XHR9XG5cblx0XHQkKHRoaXMpLmNsb3Nlc3QoJ1tkYXRhLWRyb3BdJykucmVtb3ZlQ2xhc3MoJ2Ryb3Atb3BlbicpO1xuXHR9KTtcblxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtZHJvcF0nLCBmdW5jdGlvbigpIHtcblxuXHRcdHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKCdkcm9wJyk7XG5cblx0XHRpZiAoZGF0YSA9PSAndHJpZ2dlcicpIHtcblx0XHRcdCQoJy5kcm9wLW9wZW4nKS5yZW1vdmVDbGFzcygnZHJvcC1vcGVuJyk7XG5cdFx0XHQkKHRoaXMpLnBhcmVudCgpLmNsb3Nlc3QoJ1tkYXRhLWRyb3BdJykuYWRkQ2xhc3MoJ2Ryb3Atb3BlbicpO1xuXHRcdH0gZWxzZSByZXR1cm47XG5cblx0fSk7XG5cblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXG5cdFx0dmFyIGRyb3AgPSAkKGUudGFyZ2V0KS5wYXJlbnQoKS5jbG9zZXN0KCdbZGF0YS1kcm9wXScpLmdldCgwKSxcblx0XHRcdFx0dGlwID0gJChlLnRhcmdldCkucGFyZW50KCkuY2xvc2VzdCgnLnRpcCcpLmdldCgwKTtcblxuXHRcdGlmICgkKGUudGFyZ2V0KS5oYXNDbGFzcygnY291bnRlcl9fYnRuX3BsdXMnKSkgcmV0dXJuO1xuXG5cdFx0aWYgKCFkcm9wKSB7XG5cdFx0XHQkKCcuZHJvcC1vcGVuJykucmVtb3ZlQ2xhc3MoJ2Ryb3Atb3BlbicpO1xuXHRcdH1cblxuXHRcdGlmICghdGlwKSB7XG5cdFx0XHQkKCcudGlwX19oaWRlY29udGVudCcpLmhpZGUoKTtcblx0XHRcdCQoJy5jb250YWluZXJfX21haW4nKS5jc3MoJ3otaW5kZXgnLCAnJyk7XG5cdFx0fVxuXG5cdH0pXG5cblx0JCgnLmRlc2NyaXB0aW9uX19zaG93Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5oaWRlKCk7XG5cdFx0JCgnLmRlc2NyaXB0aW9uX19zaG9ydCcpLmhpZGUoKTtcblx0XHQkKCcuZGVzY3JpcHRpb25fX2FsbCcpLnNob3coKTtcblx0fSk7XG5cblx0JCgnW2RhdGEtY2xvc2VdJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdCQodGhpcykucGFyZW50KCkuaGlkZSgpO1xuXHRcdCQodGhpcykuY2xvc2VzdCgnLmNhcmQnKS5jc3MoJ3otaW5kZXgnLCAnJyk7XG5cdH0pO1xuXG5cdCQoJy50aXBfX25hbWUnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHQkKCcuY29udGFpbmVyX19tYWluJykuY3NzKCd6LWluZGV4JywgJzMnKTtcblx0XHQkKCcuY2FyZCcpLmNzcygnei1pbmRleCcsICcnKTtcblx0XHQkKCcudGlwX19oaWRlY29udGVudCcpLmhpZGUoKTtcblx0XHQkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy50aXBfX2hpZGVjb250ZW50Jykuc2hvdygpO1xuXHRcdCQodGhpcykuY2xvc2VzdCgnLmNhcmQnKS5jc3MoJ3otaW5kZXgnLCAnMicpO1xuXHR9KTtcblxuXHQkKCcudGlwX2hvdmVyJykuaG92ZXIoZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5maW5kKCcudGlwX19oaWRlY29udGVudCcpLnNob3coKTtcblx0fSwgZnVuY3Rpb24oKSB7XG5cdFx0JCgnLnRpcF9faGlkZWNvbnRlbnQnKS5oaWRlKCk7XG5cdH0pO1xuXG5cdC8vIEdhbGxlcnlcblx0JCgnLmdhbGxlcnlfX2VsZW1lbnQnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblxuXHRcdGlmICgkKHRoaXMpLmhhc0NsYXNzKCdnYWxsZXJ5X19lbGVtZW50X3ZpZGVvJykpIHtcblx0XHRcdHZhciB2aWRlbyA9ICQodGhpcykuZmluZCgndmlkZW8nKS5jbG9uZSgpO1xuXG5cdFx0XHQkKCcubW9kYWxfem9vbSAubW9kYWxfX2NvbnRlbnQnKS5odG1sKHZpZGVvKTtcblxuXHRcdFx0JCgnLm1vZGFsX3pvb20nKS5pemlNb2RhbCgnb3BlbicpO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBpbWcgPSAkKHRoaXMpLmZpbmQoJ2ltZycpLmNsb25lKCk7XG5cblx0XHRcdCQodGhpcykuY2xvc2VzdCgnLmdhbGxlcnknKS5maW5kKCcuZ2FsbGVyeV9fdmlldycpLmVtcHR5KCkuYXBwZW5kKGltZyk7XG5cblx0XHRcdCQodGhpcykuY2xvc2VzdCgnLmdhbGxlcnlfX2xpc3QnKS5maW5kKCcuZ2FsbGVyeV9fZWxlbWVudF9hY3RpdmUnKS5yZW1vdmVDbGFzcygnZ2FsbGVyeV9fZWxlbWVudF9hY3RpdmUnKTtcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ2dhbGxlcnlfX2VsZW1lbnRfYWN0aXZlJyk7XG5cdFx0fVxuXG5cdH0pO1xuXG5cdCQoJy52bGlzdF9mdWxsJykuZWFjaChmdW5jdGlvbihpLCBsaXN0KSB7XG5cdFx0dmFyIHNob3cgPSAkKGxpc3QpLmRhdGEoJ3Nob3cnKSxcblx0XHRcdFx0bGluZSA9ICQobGlzdCkuZmluZCgnLnZsaXN0X19saW5lOm5vdCgudmxpc3RfX2xpbmVfaGVhZCknKS5nZXQoc2hvdyk7XG5cblx0XHQkKGxpbmUpLmhpZGUoKS5uZXh0QWxsKCc6bm90KC52bGlzdF9fbGluZV9tb3JlKScpLmhpZGUoKTtcblx0fSk7XG5cblx0JCgnLnZsaXN0X19tb3JlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5jbG9zZXN0KCcudmxpc3QnKS50b2dnbGVDbGFzcygndmxpc3RfYWxsc2hvdycpO1xuXHR9KTtcblxuXHQvLyBNb2RhbFxuXG5cdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0JCgnW2RhdGEtbW9kYWxdJykuaXppTW9kYWwoe1xuXHRcdFx0b25DbG9zaW5nOiBmdW5jdGlvbihyKXtcblx0XHRcdFx0dmFyIHZpZGVvID0gci4kZWxlbWVudC5maW5kKCd2aWRlbycpLmdldCgwKTtcblxuXHRcdFx0XHRpZiAodmlkZW8pIHtcblx0XHRcdFx0XHR2aWRlby5wYXVzZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sIDEpXG5cblxuXHQkKCdbZGF0YS1vcGVuXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHR2YXIgbSA9ICQodGhpcykuZGF0YSgnb3BlbicpO1xuXHRcdCQoJ1tkYXRhLW1vZGFsPScrbSsnXScpLml6aU1vZGFsKCdvcGVuJyk7XG5cdH0pO1xuXG5cblx0JCgnLmdhbGxlcnlfX3ZpZXcnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgaW1nID0gJCh0aGlzKS5maW5kKCdpbWcnKS5jbG9uZSgpO1xuXG5cdFx0JCgnLm1vZGFsX3pvb20gLm1vZGFsX19jb250ZW50JykuaHRtbChpbWcpXG5cblx0XHQkKCcubW9kYWxfem9vbScpLml6aU1vZGFsKCdvcGVuJyk7XG5cdH0pO1xuXG5cblx0JCgnLmZpbHRlci10b2dnbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHQkKCcuZmlsdGVyIC50b2dnbGU6bm90KC50b2dnbGVfY2xvc2UpJykudHJpZ2dlcignY2xpY2snKTtcblx0XHQkKCcuZmlsdGVyJykudG9nZ2xlKCk7XG5cdH0pO1xuXG5cdCQoJy5tLW1lbnVfX3RvZ2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdCQoJy5tLW1lbnVfX2NvbnRlbnQnKS50b2dnbGUoKTtcblx0fSk7XG5cblx0JCgnLm0tbWVudV9faXRlbV9kcm9wJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHR2YXIgZHJvcCA9ICQodGhpcykuZmluZCgnLm0tbWVudV9fZHJvcCcpLmZpcnN0KCk7XG5cblxuXHRcdGlmICgkKGUudGFyZ2V0KS5wYXJlbnRzVW50aWwoJy5tLW1lbnVfX2l0ZW1fZHJvcCcpLmxlbmd0aCA8PSAxKSB7XG5cdFx0XHQkKGRyb3ApLnRvZ2dsZUNsYXNzKCdtLW1lbnVfX2Ryb3Bfc2hvdycpO1xuXHRcdH1cblxuXHR9KTtcblxuXHQkKCcubS1tZW51X19iYWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5tLW1lbnVfX2Ryb3Bfc2hvdycpLnJlbW92ZUNsYXNzKCdtLW1lbnVfX2Ryb3Bfc2hvdycpO1xuXHR9KTtcblxuXHQkKCdbZGF0YS10YWJzXSA+IConKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0dmFyIGRhdGEgPSAkKHRoaXMpLnBhcmVudCgpLmRhdGEoJ3RhYnMnKSxcblx0XHRcdFx0aW5kZXggPSAkKHRoaXMpLmluZGV4KCksXG5cdFx0XHRcdGNvbnRlbnQgPSAkKCdbZGF0YS10YWJzLWNvbnRlbnQ9JytkYXRhKyddJykuY2hpbGRyZW4oKS5nZXQoaW5kZXgpO1xuXG5cdFx0JChjb250ZW50KS5zaG93KCkuc2libGluZ3MoKS5oaWRlKCk7XG5cblx0XHRpZiAoIWNvbnRlbnQpIHtcblx0XHRcdCQoJ1tkYXRhLXRhYnMtY29udGVudD0nK2RhdGErJ10nKS5jaGlsZHJlbigpLmhpZGUoKTtcblx0XHR9XG5cblx0XHQkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0fSk7XG5cblx0Ly8gaWYgKCQoJy5tb2RhbF92aWRlbycpLmdldCgwKSkge1xuXHQvLyBcdCQoXCIubW9kYWxfdmlkZW9cIikuaXppTW9kYWwoe1xuXHQvLyBcdFx0aGlzdG9yeTogZmFsc2UsXG5cdC8vIFx0XHRpZnJhbWUgOiB0cnVlLFxuXHQvLyBcdFx0ZnVsbHNjcmVlbjogdHJ1ZSxcblx0Ly8gXHRcdGhlYWRlckNvbG9yOiAnIzAwMDAwMCcsXG5cdC8vIFx0XHRncm91cDogJ2dyb3VwMScsXG5cdC8vIFx0XHRsb29wOiB0cnVlXG5cdC8vIFx0fSk7XG5cdC8vIH1cblxuXG5cdCQoJy52aWRlbycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpZCA9ICQodGhpcykuZGF0YSgnaWQnKTtcblxuXHRcdCQoJyMnK2lkKS5pemlNb2RhbCgnb3BlbicpO1xuXHR9KTtcblxuXHQkKCcuY2hlY2tib3ggaW5wdXQnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuXHRcdCQodGhpcykuY2xvc2VzdCgnLmNoZWNrYm94JykudG9nZ2xlQ2xhc3MoJ2NoZWNrYm94X2FjdGl2ZScpO1xuXHR9KTtcblxuXHR2YXIgc2Nyb2xsaW5nLFxuXHRcdFx0dG9Ub3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG8tdG9wJyk7XG5cblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24oZSkge1xuXHRcdCBzY3JvbGxpbmcgPSBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcblxuXHRcdCBpZiAoJChlLnRhcmdldCkuY2xvc2VzdCgnLnJlc3VsdHMnKS5nZXQoMCkpIHJldHVybjtcblxuXHRcdCBpZiAoc2Nyb2xsaW5nID49IDIwMCkge1xuXHRcdFx0ICQoJy5oZWFkZXJfX2ZpeCcpLmFkZENsYXNzKCdoZWFkZXJfX2ZpeF9zaG93Jyk7XG5cdFx0XHQgJCgnLnJlc3VsdHMnKS5hcHBlbmRUbygnLmhlYWRlcl9fZml4IC5zZWFyY2gnKTtcblx0XHQgfSBlbHNlIGlmICgkKCcuaGVhZGVyX19maXgnKS5oYXNDbGFzcygnaGVhZGVyX19maXhfc2hvdycpKSB7XG5cdFx0XHQgJCgnLmhlYWRlcl9fZml4JykucmVtb3ZlQ2xhc3MoJ2hlYWRlcl9fZml4X3Nob3cnKTtcblx0XHRcdCAkKCcucmVzdWx0cycpLmFwcGVuZFRvKCcuaGVhZGVyX19ib2R5IC5zZWFyY2gnKTtcblx0XHQgfVxuXG5cdFx0IGlmIChzY3JvbGxpbmcgPj0gMTAwMCAmJiB3aW5kb3dXaWR0aCA+IDk2MCkge1xuXHRcdFx0IHRvVG9wLmNsYXNzTGlzdC5hZGQoJ3RvLXRvcF9zaG93Jyk7XG5cdFx0IH0gZWxzZSB7XG5cdFx0XHQgdG9Ub3AuY2xhc3NMaXN0LnJlbW92ZSgndG8tdG9wX3Nob3cnKTtcblx0XHQgfVxuXHR9LCB0cnVlKTtcblxuXHQkKCcudG8tdG9wJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JChcImh0bWwsIGJvZHlcIikuc3RvcCgpLmFuaW1hdGUoe3Njcm9sbFRvcDowfSwgNTAwLCAnc3dpbmcnKTtcblx0fSk7XG5cblx0JCgnLmNvdW50ZXJfX2J0bl9wbHVzJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdCQoJy50aXBfX2hpZGVjb250ZW50JykuaGlkZSgpO1xuXHRcdCQodGhpcykucGFyZW50KCkuZmluZCgnLnRpcF9faGlkZWNvbnRlbnQnKS5maXJzdCgpLnNob3coKTtcblx0fSk7XG5cblx0Ly8gc2VhcmNoXG5cdCQoJy5zZWFyY2hfX2ZpZWxkIGlucHV0JykuZm9jdXMoZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5jbG9zZXN0KCcuc2VhcmNoJykuYWRkQ2xhc3MoJ3NlYXJjaF9mb2N1cycpO1xuXHR9KTtcblxuXHQkKCcuc2VhcmNoX19maWVsZCBpbnB1dCcpLmZvY3Vzb3V0KGZ1bmN0aW9uKCkge1xuXHRcdCQodGhpcykuY2xvc2VzdCgnLnNlYXJjaCcpLnJlbW92ZUNsYXNzKCdzZWFyY2hfZm9jdXMnKTtcblx0fSk7XG5cblx0aW5pdCgpO1xuXG59KSh3aW5kb3cpO1xuIl19
