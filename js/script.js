'use strict';

(function (root) {

	// Инициализация прилдожения
	var windowWidth = $(window).width();

	function init() {

		if ($('.gallery').get(0)) {
			$('.gallery__element').first().trigger('click');
		}

		$('[data-tabs]').each(function (i, tabs) {
			$(tabs).children().first().trigger('click');
		});

		$('.toggle_close').each(function (i, toggle) {
			var data = $(this).data('toggle');

			$(this).parent().find('.' + data).hide();
		});
	};

	$(window).on('resize', function () {
		windowWidth = $(window).width();
	});

	// Слайдеры
	var dataSliders = {
		feautures: {
			items: 6,
			nav: true
		},
		gallery: {
			items: 1,
			nav: true,
			dots: true,
			mouseDrag: false,
			responsive: {
				961: {
					items: 4,
					dots: false
				}
			}
		},
		promo: {
			items: 1,
			dots: true,
			loop: true,
			autoplay: true
		},
		shop: {
			items: 1,
			loop: true,
			nav: false,
			center: false,
			responsive: {
				961: {
					items: 3,
					center: true,
					nav: true
				}
			}
		}
	};

	$('[data-slider]').each(function (i, slider) {
		var data = $(this).data('slider');

		$(slider).owlCarousel(dataSliders[data]);
	});

	$('.range__slider').each(function () {
		var range = this,
		    minInput = $(range).closest('.range').find('[data-input="min"]'),
		    maxInput = $(range).closest('.range').find('[data-input="max"]');

		function update() {
			var from = $(range).data('from'),
			    to = $(range).data('to');

			$(minInput).val(from);
			$(maxInput).val(to);
		}

		$(range).ionRangeSlider({
			extra_classes: 'range__slider',
			hide_min_max: true,
			hide_from_to: true
		});

		update();
		$(range).on('change', update);
	});

	$('[data-input]').on('change', function () {
		var range = $(this).closest('.range').find('input.range__slider').data("ionRangeSlider"),
		    val = $(this).val(),
		    min = range.options.min,
		    max = range.options.max,
		    from = range.options.from,
		    to = range.options.to,
		    step = range.options.step;

		switch ($(this).data('input')) {
			case 'min':
				if (val <= min) {
					val = min;
				} else if (val >= max) {
					val = max - step;
				} else if (val >= to) {
					val = to - step;
				}

				range.update({
					from: val
				});
				break;
			case 'max':
				if (val >= max) {
					val = max;
				} else if (val <= min) {
					val = min + step;
				} else if (val <= from) {
					val = from + step;
				}

				range.update({
					to: val
				});
				break;
		}

		$(this).val(val);
	});

	// fields
	function filled(field) {
		var val = $(field).val().trim();

		if (val.length > 0) {
			$(field).closest('.field').addClass('field_filled');
		} else {
			$(field).closest('.field').removeClass('field_filled');
		}
	}

	$('.field input, .field textarea').each(function () {
		filled(this);
	});

	$(document).on('keydown', '.field input, .field textarea', function () {
		var t = this;
		setTimeout(function () {
			filled(t);
		}, 100);
	});

	$('.toggle').on('click', function (e) {
		e.stopPropagation();
		var content = $(this).parent().find($('.' + $(this).data('toggle')));
		$(this).toggleClass('toggle_close');
		$(content).stop().slideToggle(300);
	});

	$('.filter__block-content').each(function (i, block) {
		var checks = $(block).find('.checkbox').length;

		if (checks > 5) {
			$(block).addClass('filter__block-content_more');
			$(block).append('<span class="filter__block-more">Показать все</span>');
		}
	});

	$('.filter__block-more').on('click', function () {
		$(this).parent().removeClass('filter__block-content_more');
		$(this).remove();
	});

	$('.drop__item').on('click', function () {
		if (!$(this).hasClass('drop__item_link')) {
			$(this).addClass('drop__item_active').siblings().removeClass('drop__item_active');
		}

		$(this).closest('[data-drop]').removeClass('drop-open');
	});

	$(document).on('click', '[data-drop]', function () {

		var data = $(this).data('drop');

		if (data == 'trigger') {
			$('.drop-open').removeClass('drop-open');
			$(this).parent().closest('[data-drop]').addClass('drop-open');
		} else return;
	});

	$(document).on('click', function (e) {

		var drop = $(e.target).parent().closest('[data-drop]').get(0),
		    tip = $(e.target).parent().closest('.tip').get(0);

		if ($(e.target).hasClass('counter__btn_plus')) return;

		if (!drop) {
			$('.drop-open').removeClass('drop-open');
		}

		if (!tip) {
			$('.tip__hidecontent').hide();
			$('.container__main').css('z-index', '');
		}
	});

	$('.description__show').on('click', function () {
		$(this).hide();
		$('.description__short').hide();
		$('.description__all').show();
	});

	$('[data-close]').on('click', function (e) {
		e.preventDefault();

		$(this).parent().hide();
		$(this).closest('.card').css('z-index', '');
	});

	$('.tip__name').on('click', function () {
		$('.container__main').css('z-index', '3');
		$('.card').css('z-index', '');
		$('.tip__hidecontent').hide();
		$(this).parent().find('.tip__hidecontent').show();
		$(this).closest('.card').css('z-index', '2');
	});

	$('.tip_hover').hover(function () {
		$(this).find('.tip__hidecontent').show();
	}, function () {
		$('.tip__hidecontent').hide();
	});

	// Gallery
	$('.gallery__element').on('click', function () {

		if ($(this).hasClass('gallery__element_video')) {
			var video = $(this).find('video').clone();

			$('.modal_zoom .modal__content').html(video);

			$('.modal_zoom').iziModal('open');
		} else {
			var img = $(this).find('img').clone();

			$(this).closest('.gallery').find('.gallery__view').empty().append(img);

			$(this).closest('.gallery__list').find('.gallery__element_active').removeClass('gallery__element_active');
			$(this).addClass('gallery__element_active');
		}
	});

	$('.vlist_full').each(function (i, list) {
		var show = $(list).data('show'),
		    line = $(list).find('.vlist__line:not(.vlist__line_head)').get(show);

		$(line).hide().nextAll(':not(.vlist__line_more)').hide();
	});

	$('.vlist__more').on('click', function () {
		$(this).closest('.vlist').toggleClass('vlist_allshow');
	});

	// Modal

	setTimeout(function () {
		$('[data-modal]').iziModal({
			onClosing: function onClosing(r) {
				var video = r.$element.find('video').get(0);

				if (video) {
					video.pause();
				}
			}
		});
	}, 1);

	$('[data-open]').on('click', function (e) {
		e.preventDefault();

		var m = $(this).data('open');
		$('[data-modal=' + m + ']').iziModal('open');
	});

	$('.gallery__view, .shop__slide').on('click', function () {
		var img = $(this).find('img').clone();

		$('.modal_zoom .modal__content').html(img);

		$('.modal_zoom').iziModal('open');
	});

	$('.filter-toggle').on('click', function () {
		$('.filter .toggle:not(.toggle_close)').trigger('click');
		$('.filter').toggle();
	});

	$('.m-menu__toggle').on('click', function () {
		$('.m-menu__content').toggle();
	});

	$('.m-menu__item_drop').on('click', function (e) {
		e.stopPropagation();

		var drop = $(this).find('.m-menu__drop').first();

		if ($(e.target).parentsUntil('.m-menu__item_drop').length <= 1) {
			$(drop).toggleClass('m-menu__drop_show');
		}
	});

	$('.m-menu__back').on('click', function (e) {
		e.stopPropagation();

		$(this).closest('.m-menu__drop_show').removeClass('m-menu__drop_show');
	});

	$('[data-tabs] > *').on('click', function (e) {
		e.preventDefault();

		var data = $(this).parent().data('tabs'),
		    index = $(this).index(),
		    content = $('[data-tabs-content=' + data + ']').children().get(index);

		$(content).show().siblings().hide();

		if (!content) {
			$('[data-tabs-content=' + data + ']').children().hide();
		}

		$(this).addClass('active').siblings().removeClass('active');
	});

	// if ($('.modal_video').get(0)) {
	// 	$(".modal_video").iziModal({
	// 		history: false,
	// 		iframe : true,
	// 		fullscreen: true,
	// 		headerColor: '#000000',
	// 		group: 'group1',
	// 		loop: true
	// 	});
	// }


	$('.video').on('click', function () {
		var id = $(this).data('id');

		$('#' + id).iziModal('open');
	});

	$('.checkbox input').on('click', function (e) {
		e.stopPropagation();

		$(this).closest('.checkbox').toggleClass('checkbox_active');
	});

	var scrolling,
	    toTop = document.querySelector('.to-top');

	document.addEventListener('scroll', function (e) {
		scrolling = document.body.scrollTop;

		if ($(e.target).closest('.results').get(0)) return;

		if (scrolling >= 200) {
			$('.header__fix').addClass('header__fix_show');
			$('.results').appendTo('.header__fix .search');
		} else if ($('.header__fix').hasClass('header__fix_show')) {
			$('.header__fix').removeClass('header__fix_show');
			$('.results').appendTo('.header__body .search');
		}

		if (scrolling >= 1000 && windowWidth > 960) {
			toTop.classList.add('to-top_show');
		} else {
			toTop.classList.remove('to-top_show');
		}
	}, true);

	$('.to-top').on('click', function () {
		$("html, body").stop().animate({ scrollTop: 0 }, 500, 'swing');
	});

	$('.counter__btn_plus').on('click', function (e) {
		e.preventDefault();

		$('.tip__hidecontent').hide();
		$(this).parent().find('.tip__hidecontent').first().show();
	});

	// search
	$('.search__field input').focus(function () {
		$(this).closest('.search').addClass('search_focus');
	});

	$('.search__field input').focusout(function () {
		$(this).closest('.search').removeClass('search_focus');
	});

	init();

	$('button.btn, .counter__btn, .close').on('click', function (e) {
		e.preventDefault();
	});

	$('a[href^="#"]').on('click', function (e) {
		e.preventDefault();
		var id = $(this).attr('href');

		$('html, body').animate({
			scrollTop: $(id).offset().top + $('body').scrollTop() - 80
		}, 1000);
	});

	$('.drop .close').on('click', function () {
		$(this).closest('.drop-open').removeClass('drop-open');
	});
})(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJyb290Iiwid2luZG93V2lkdGgiLCIkIiwid2luZG93Iiwid2lkdGgiLCJpbml0IiwiZ2V0IiwiZmlyc3QiLCJ0cmlnZ2VyIiwiZWFjaCIsImkiLCJ0YWJzIiwiY2hpbGRyZW4iLCJ0b2dnbGUiLCJkYXRhIiwicGFyZW50IiwiZmluZCIsImhpZGUiLCJvbiIsImRhdGFTbGlkZXJzIiwiZmVhdXR1cmVzIiwiaXRlbXMiLCJuYXYiLCJnYWxsZXJ5IiwiZG90cyIsIm1vdXNlRHJhZyIsInJlc3BvbnNpdmUiLCJwcm9tbyIsImxvb3AiLCJhdXRvcGxheSIsInNob3AiLCJjZW50ZXIiLCJzbGlkZXIiLCJvd2xDYXJvdXNlbCIsInJhbmdlIiwibWluSW5wdXQiLCJjbG9zZXN0IiwibWF4SW5wdXQiLCJ1cGRhdGUiLCJmcm9tIiwidG8iLCJ2YWwiLCJpb25SYW5nZVNsaWRlciIsImV4dHJhX2NsYXNzZXMiLCJoaWRlX21pbl9tYXgiLCJoaWRlX2Zyb21fdG8iLCJtaW4iLCJvcHRpb25zIiwibWF4Iiwic3RlcCIsImZpbGxlZCIsImZpZWxkIiwidHJpbSIsImxlbmd0aCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJkb2N1bWVudCIsInQiLCJzZXRUaW1lb3V0IiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImNvbnRlbnQiLCJ0b2dnbGVDbGFzcyIsInN0b3AiLCJzbGlkZVRvZ2dsZSIsImJsb2NrIiwiY2hlY2tzIiwiYXBwZW5kIiwicmVtb3ZlIiwiaGFzQ2xhc3MiLCJzaWJsaW5ncyIsImRyb3AiLCJ0YXJnZXQiLCJ0aXAiLCJjc3MiLCJzaG93IiwicHJldmVudERlZmF1bHQiLCJob3ZlciIsInZpZGVvIiwiY2xvbmUiLCJodG1sIiwiaXppTW9kYWwiLCJpbWciLCJlbXB0eSIsImxpc3QiLCJsaW5lIiwibmV4dEFsbCIsIm9uQ2xvc2luZyIsInIiLCIkZWxlbWVudCIsInBhdXNlIiwibSIsInBhcmVudHNVbnRpbCIsImluZGV4IiwiaWQiLCJzY3JvbGxpbmciLCJ0b1RvcCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiYm9keSIsInNjcm9sbFRvcCIsImFwcGVuZFRvIiwiY2xhc3NMaXN0IiwiYWRkIiwiYW5pbWF0ZSIsImZvY3VzIiwiZm9jdXNvdXQiLCJhdHRyIiwib2Zmc2V0IiwidG9wIl0sIm1hcHBpbmdzIjoiOztBQUFBLENBQUMsVUFBU0EsSUFBVCxFQUFlOztBQUVmO0FBQ0EsS0FBSUMsY0FBY0MsRUFBRUMsTUFBRixFQUFVQyxLQUFWLEVBQWxCOztBQUVBLFVBQVNDLElBQVQsR0FBZ0I7O0FBRWYsTUFBSUgsRUFBRSxVQUFGLEVBQWNJLEdBQWQsQ0FBa0IsQ0FBbEIsQ0FBSixFQUEwQjtBQUN6QkosS0FBRSxtQkFBRixFQUF1QkssS0FBdkIsR0FBK0JDLE9BQS9CLENBQXVDLE9BQXZDO0FBQ0E7O0FBRUROLElBQUUsYUFBRixFQUFpQk8sSUFBakIsQ0FBc0IsVUFBU0MsQ0FBVCxFQUFZQyxJQUFaLEVBQWtCO0FBQ3ZDVCxLQUFFUyxJQUFGLEVBQVFDLFFBQVIsR0FBbUJMLEtBQW5CLEdBQTJCQyxPQUEzQixDQUFtQyxPQUFuQztBQUNBLEdBRkQ7O0FBSUFOLElBQUUsZUFBRixFQUFtQk8sSUFBbkIsQ0FBd0IsVUFBU0MsQ0FBVCxFQUFZRyxNQUFaLEVBQW9CO0FBQzNDLE9BQUlDLE9BQU9aLEVBQUUsSUFBRixFQUFRWSxJQUFSLENBQWEsUUFBYixDQUFYOztBQUVBWixLQUFFLElBQUYsRUFBUWEsTUFBUixHQUFpQkMsSUFBakIsQ0FBc0IsTUFBSUYsSUFBMUIsRUFBZ0NHLElBQWhDO0FBQ0EsR0FKRDtBQUtBOztBQUVEZixHQUFFQyxNQUFGLEVBQVVlLEVBQVYsQ0FBYSxRQUFiLEVBQXVCLFlBQVc7QUFDakNqQixnQkFBY0MsRUFBRUMsTUFBRixFQUFVQyxLQUFWLEVBQWQ7QUFDQSxFQUZEOztBQUlBO0FBQ0EsS0FBSWUsY0FBYztBQUNqQkMsYUFBVztBQUNWQyxVQUFPLENBREc7QUFFVkMsUUFB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IHtcblxuXHQvLyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQv9GA0LjQu9C00L7QttC10L3QuNGPXG5cdHZhciB3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xuXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cblx0XHRpZiAoJCgnLmdhbGxlcnknKS5nZXQoMCkpIHtcblx0XHRcdCQoJy5nYWxsZXJ5X19lbGVtZW50JykuZmlyc3QoKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdH1cblxuXHRcdCQoJ1tkYXRhLXRhYnNdJykuZWFjaChmdW5jdGlvbihpLCB0YWJzKSB7XG5cdFx0XHQkKHRhYnMpLmNoaWxkcmVuKCkuZmlyc3QoKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdH0pO1xuXG5cdFx0JCgnLnRvZ2dsZV9jbG9zZScpLmVhY2goZnVuY3Rpb24oaSwgdG9nZ2xlKSB7XG5cdFx0XHR2YXIgZGF0YSA9ICQodGhpcykuZGF0YSgndG9nZ2xlJyk7XG5cblx0XHRcdCQodGhpcykucGFyZW50KCkuZmluZCgnLicrZGF0YSkuaGlkZSgpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdCQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24oKSB7XG5cdFx0d2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcblx0fSk7XG5cblx0Ly8g0KHQu9Cw0LnQtNC10YDRi1xuXHR2YXIgZGF0YVNsaWRlcnMgPSB7XG5cdFx0ZmVhdXR1cmVzOiB7XG5cdFx0XHRpdGVtczogNixcblx0XHRcdG5hdjogdHJ1ZVxuXHRcdH0sXG5cdFx0Z2FsbGVyeToge1xuXHRcdFx0aXRlbXM6IDEsXG5cdFx0XHRuYXY6IHRydWUsXG5cdFx0XHRkb3RzOiB0cnVlLFxuXHRcdFx0bW91c2VEcmFnOiBmYWxzZSxcblx0XHRcdHJlc3BvbnNpdmU6IHtcblx0XHRcdFx0OTYxOiB7XG5cdFx0XHRcdFx0aXRlbXM6IDQsXG5cdFx0XHRcdFx0ZG90czogZmFsc2Vcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0cHJvbW86IHtcblx0XHRcdGl0ZW1zOiAxLFxuXHRcdFx0ZG90czogdHJ1ZSxcblx0XHRcdGxvb3A6IHRydWUsXG5cdFx0XHRhdXRvcGxheTogdHJ1ZSxcblx0XHR9LFxuXHRcdHNob3A6IHtcblx0XHRcdGl0ZW1zOiAxLFxuXHRcdFx0bG9vcDogdHJ1ZSxcblx0XHRcdG5hdjogZmFsc2UsXG5cdFx0XHRjZW50ZXI6IGZhbHNlLFxuXHRcdFx0cmVzcG9uc2l2ZToge1xuXHRcdFx0XHQ5NjE6IHtcblx0XHRcdFx0XHRpdGVtczogMyxcblx0XHRcdFx0XHRjZW50ZXI6IHRydWUsXG5cdFx0XHRcdFx0bmF2OiB0cnVlLFxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0JCgnW2RhdGEtc2xpZGVyXScpLmVhY2goZnVuY3Rpb24oaSwgc2xpZGVyKSB7XG5cdFx0dmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoJ3NsaWRlcicpO1xuXG5cdFx0JChzbGlkZXIpLm93bENhcm91c2VsKGRhdGFTbGlkZXJzW2RhdGFdKVxuXHR9KTtcblxuXHQkKCcucmFuZ2VfX3NsaWRlcicpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHJhbmdlID0gdGhpcyxcblx0XHRcdFx0bWluSW5wdXQgPSAkKHJhbmdlKS5jbG9zZXN0KCcucmFuZ2UnKS5maW5kKCdbZGF0YS1pbnB1dD1cIm1pblwiXScpLFxuXHRcdFx0XHRtYXhJbnB1dCA9ICQocmFuZ2UpLmNsb3Nlc3QoJy5yYW5nZScpLmZpbmQoJ1tkYXRhLWlucHV0PVwibWF4XCJdJyk7XG5cblx0XHRmdW5jdGlvbiB1cGRhdGUoKSB7XG5cdFx0XHR2YXIgZnJvbSA9ICQocmFuZ2UpLmRhdGEoJ2Zyb20nKSxcblx0XHRcdFx0XHR0byA9ICQocmFuZ2UpLmRhdGEoJ3RvJyk7XG5cblx0XHRcdCQobWluSW5wdXQpLnZhbChmcm9tKTtcblx0XHRcdCQobWF4SW5wdXQpLnZhbCh0byk7XG5cdFx0fVxuXG5cdFx0JChyYW5nZSkuaW9uUmFuZ2VTbGlkZXIoe1xuXHRcdFx0ZXh0cmFfY2xhc3NlczogJ3JhbmdlX19zbGlkZXInLFxuXHRcdFx0aGlkZV9taW5fbWF4OiB0cnVlLFxuXHRcdFx0aGlkZV9mcm9tX3RvOiB0cnVlLFxuXHRcdH0pO1xuXG5cdFx0dXBkYXRlKCk7XG5cdFx0JChyYW5nZSkub24oJ2NoYW5nZScsIHVwZGF0ZSk7XG5cdH0pO1xuXG5cdCQoJ1tkYXRhLWlucHV0XScpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgcmFuZ2UgPSAkKHRoaXMpLmNsb3Nlc3QoJy5yYW5nZScpLmZpbmQoJ2lucHV0LnJhbmdlX19zbGlkZXInKS5kYXRhKFwiaW9uUmFuZ2VTbGlkZXJcIiksXG5cdFx0XHRcdHZhbCA9ICQodGhpcykudmFsKCksXG5cdFx0XHRcdG1pbiA9IHJhbmdlLm9wdGlvbnMubWluLFxuXHRcdFx0XHRtYXggPSByYW5nZS5vcHRpb25zLm1heCxcblx0XHRcdFx0ZnJvbSA9IHJhbmdlLm9wdGlvbnMuZnJvbSxcblx0XHRcdFx0dG8gPSByYW5nZS5vcHRpb25zLnRvLFxuXHRcdFx0XHRzdGVwID0gcmFuZ2Uub3B0aW9ucy5zdGVwO1xuXG5cdFx0c3dpdGNoICgkKHRoaXMpLmRhdGEoJ2lucHV0JykpIHtcblx0XHRcdGNhc2UgJ21pbic6XG5cdFx0XHRcdGlmICh2YWwgPD0gbWluKSB7XG5cdFx0XHRcdFx0dmFsID0gbWluO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHZhbCA+PSBtYXgpIHtcblx0XHRcdFx0XHR2YWwgPSBtYXggLSBzdGVwO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHZhbCA+PSB0bykge1xuXHRcdFx0XHRcdHZhbCA9IHRvIC0gc3RlcDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJhbmdlLnVwZGF0ZSh7XG5cdFx0XHRcdFx0ZnJvbTogdmFsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ21heCc6XG5cdFx0XHRcdGlmICh2YWwgPj0gbWF4KSB7XG5cdFx0XHRcdFx0dmFsID0gbWF4O1xuXHRcdFx0XHR9IGVsc2UgaWYgKHZhbCA8PSBtaW4pIHtcblx0XHRcdFx0XHR2YWwgPSBtaW4gKyBzdGVwO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHZhbCA8PSBmcm9tKSB7XG5cdFx0XHRcdFx0dmFsID0gZnJvbSArIHN0ZXA7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyYW5nZS51cGRhdGUoe1xuXHRcdFx0XHRcdHRvOiB2YWxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblxuXHRcdCQodGhpcykudmFsKHZhbCk7XG5cblx0fSk7XG5cblx0Ly8gZmllbGRzXG5cdGZ1bmN0aW9uIGZpbGxlZChmaWVsZCkge1xuXHRcdHZhciB2YWwgPSAkKGZpZWxkKS52YWwoKS50cmltKCk7XG5cblx0XHRpZiAodmFsLmxlbmd0aCA+IDApIHtcblx0XHRcdCQoZmllbGQpLmNsb3Nlc3QoJy5maWVsZCcpLmFkZENsYXNzKCdmaWVsZF9maWxsZWQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JChmaWVsZCkuY2xvc2VzdCgnLmZpZWxkJykucmVtb3ZlQ2xhc3MoJ2ZpZWxkX2ZpbGxlZCcpO1xuXHRcdH1cblx0fVxuXG5cdCQoJy5maWVsZCBpbnB1dCwgLmZpZWxkIHRleHRhcmVhJykuZWFjaChmdW5jdGlvbigpIHtcblx0XHRmaWxsZWQodGhpcyk7XG5cdH0pO1xuXG5cdCQoZG9jdW1lbnQpLm9uKCdrZXlkb3duJywgJy5maWVsZCBpbnB1dCwgLmZpZWxkIHRleHRhcmVhJywgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHQgPSB0aGlzO1xuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRmaWxsZWQodCk7XG5cdFx0fSwgMTAwKVxuXHR9KTtcblxuXG5cdCQoJy50b2dnbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKVxuXHRcdHZhciBjb250ZW50ID0gJCh0aGlzKS5wYXJlbnQoKS5maW5kKCQoJy4nKyQodGhpcykuZGF0YSgndG9nZ2xlJykpKTtcblx0XHQkKHRoaXMpLnRvZ2dsZUNsYXNzKCd0b2dnbGVfY2xvc2UnKTtcblx0XHQkKGNvbnRlbnQpLnN0b3AoKS5zbGlkZVRvZ2dsZSgzMDApO1xuXHR9KTtcblxuXHQkKCcuZmlsdGVyX19ibG9jay1jb250ZW50JykuZWFjaChmdW5jdGlvbihpLCBibG9jaykge1xuXHRcdHZhciBjaGVja3MgPSAkKGJsb2NrKS5maW5kKCcuY2hlY2tib3gnKS5sZW5ndGg7XG5cblx0XHRpZiAoY2hlY2tzID4gNSkge1xuXHRcdFx0JChibG9jaykuYWRkQ2xhc3MoJ2ZpbHRlcl9fYmxvY2stY29udGVudF9tb3JlJyk7XG5cdFx0XHQkKGJsb2NrKS5hcHBlbmQoJzxzcGFuIGNsYXNzPVwiZmlsdGVyX19ibG9jay1tb3JlXCI+0J/QvtC60LDQt9Cw0YLRjCDQstGB0LU8L3NwYW4+Jyk7XG5cdFx0fVxuXHR9KTtcblxuXHQkKCcuZmlsdGVyX19ibG9jay1tb3JlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnZmlsdGVyX19ibG9jay1jb250ZW50X21vcmUnKTtcblx0XHQkKHRoaXMpLnJlbW92ZSgpO1xuXHR9KTtcblxuXHQkKCcuZHJvcF9faXRlbScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdGlmICghJCh0aGlzKS5oYXNDbGFzcygnZHJvcF9faXRlbV9saW5rJykpIHtcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ2Ryb3BfX2l0ZW1fYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnZHJvcF9faXRlbV9hY3RpdmUnKTtcblx0XHR9XG5cblx0XHQkKHRoaXMpLmNsb3Nlc3QoJ1tkYXRhLWRyb3BdJykucmVtb3ZlQ2xhc3MoJ2Ryb3Atb3BlbicpO1xuXHR9KTtcblxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtZHJvcF0nLCBmdW5jdGlvbigpIHtcblxuXHRcdHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKCdkcm9wJyk7XG5cblx0XHRpZiAoZGF0YSA9PSAndHJpZ2dlcicpIHtcblx0XHRcdCQoJy5kcm9wLW9wZW4nKS5yZW1vdmVDbGFzcygnZHJvcC1vcGVuJyk7XG5cdFx0XHQkKHRoaXMpLnBhcmVudCgpLmNsb3Nlc3QoJ1tkYXRhLWRyb3BdJykuYWRkQ2xhc3MoJ2Ryb3Atb3BlbicpO1xuXHRcdH0gZWxzZSByZXR1cm47XG5cblx0fSk7XG5cblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXG5cdFx0dmFyIGRyb3AgPSAkKGUudGFyZ2V0KS5wYXJlbnQoKS5jbG9zZXN0KCdbZGF0YS1kcm9wXScpLmdldCgwKSxcblx0XHRcdFx0dGlwID0gJChlLnRhcmdldCkucGFyZW50KCkuY2xvc2VzdCgnLnRpcCcpLmdldCgwKTtcblxuXHRcdGlmICgkKGUudGFyZ2V0KS5oYXNDbGFzcygnY291bnRlcl9fYnRuX3BsdXMnKSkgcmV0dXJuO1xuXG5cdFx0aWYgKCFkcm9wKSB7XG5cdFx0XHQkKCcuZHJvcC1vcGVuJykucmVtb3ZlQ2xhc3MoJ2Ryb3Atb3BlbicpO1xuXHRcdH1cblxuXHRcdGlmICghdGlwKSB7XG5cdFx0XHQkKCcudGlwX19oaWRlY29udGVudCcpLmhpZGUoKTtcblx0XHRcdCQoJy5jb250YWluZXJfX21haW4nKS5jc3MoJ3otaW5kZXgnLCAnJyk7XG5cdFx0fVxuXG5cdH0pXG5cblx0JCgnLmRlc2NyaXB0aW9uX19zaG93Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5oaWRlKCk7XG5cdFx0JCgnLmRlc2NyaXB0aW9uX19zaG9ydCcpLmhpZGUoKTtcblx0XHQkKCcuZGVzY3JpcHRpb25fX2FsbCcpLnNob3coKTtcblx0fSk7XG5cblx0JCgnW2RhdGEtY2xvc2VdJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdCQodGhpcykucGFyZW50KCkuaGlkZSgpO1xuXHRcdCQodGhpcykuY2xvc2VzdCgnLmNhcmQnKS5jc3MoJ3otaW5kZXgnLCAnJyk7XG5cdH0pO1xuXG5cdCQoJy50aXBfX25hbWUnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHQkKCcuY29udGFpbmVyX19tYWluJykuY3NzKCd6LWluZGV4JywgJzMnKTtcblx0XHQkKCcuY2FyZCcpLmNzcygnei1pbmRleCcsICcnKTtcblx0XHQkKCcudGlwX19oaWRlY29udGVudCcpLmhpZGUoKTtcblx0XHQkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy50aXBfX2hpZGVjb250ZW50Jykuc2hvdygpO1xuXHRcdCQodGhpcykuY2xvc2VzdCgnLmNhcmQnKS5jc3MoJ3otaW5kZXgnLCAnMicpO1xuXHR9KTtcblxuXHQkKCcudGlwX2hvdmVyJykuaG92ZXIoZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5maW5kKCcudGlwX19oaWRlY29udGVudCcpLnNob3coKTtcblx0fSwgZnVuY3Rpb24oKSB7XG5cdFx0JCgnLnRpcF9faGlkZWNvbnRlbnQnKS5oaWRlKCk7XG5cdH0pO1xuXG5cdC8vIEdhbGxlcnlcblx0JCgnLmdhbGxlcnlfX2VsZW1lbnQnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblxuXHRcdGlmICgkKHRoaXMpLmhhc0NsYXNzKCdnYWxsZXJ5X19lbGVtZW50X3ZpZGVvJykpIHtcblx0XHRcdHZhciB2aWRlbyA9ICQodGhpcykuZmluZCgndmlkZW8nKS5jbG9uZSgpO1xuXG5cdFx0XHQkKCcubW9kYWxfem9vbSAubW9kYWxfX2NvbnRlbnQnKS5odG1sKHZpZGVvKTtcblxuXHRcdFx0JCgnLm1vZGFsX3pvb20nKS5pemlNb2RhbCgnb3BlbicpO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBpbWcgPSAkKHRoaXMpLmZpbmQoJ2ltZycpLmNsb25lKCk7XG5cblx0XHRcdCQodGhpcykuY2xvc2VzdCgnLmdhbGxlcnknKS5maW5kKCcuZ2FsbGVyeV9fdmlldycpLmVtcHR5KCkuYXBwZW5kKGltZyk7XG5cblx0XHRcdCQodGhpcykuY2xvc2VzdCgnLmdhbGxlcnlfX2xpc3QnKS5maW5kKCcuZ2FsbGVyeV9fZWxlbWVudF9hY3RpdmUnKS5yZW1vdmVDbGFzcygnZ2FsbGVyeV9fZWxlbWVudF9hY3RpdmUnKTtcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ2dhbGxlcnlfX2VsZW1lbnRfYWN0aXZlJyk7XG5cdFx0fVxuXG5cdH0pO1xuXG5cdCQoJy52bGlzdF9mdWxsJykuZWFjaChmdW5jdGlvbihpLCBsaXN0KSB7XG5cdFx0dmFyIHNob3cgPSAkKGxpc3QpLmRhdGEoJ3Nob3cnKSxcblx0XHRcdFx0bGluZSA9ICQobGlzdCkuZmluZCgnLnZsaXN0X19saW5lOm5vdCgudmxpc3RfX2xpbmVfaGVhZCknKS5nZXQoc2hvdyk7XG5cblx0XHQkKGxpbmUpLmhpZGUoKS5uZXh0QWxsKCc6bm90KC52bGlzdF9fbGluZV9tb3JlKScpLmhpZGUoKTtcblx0fSk7XG5cblx0JCgnLnZsaXN0X19tb3JlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5jbG9zZXN0KCcudmxpc3QnKS50b2dnbGVDbGFzcygndmxpc3RfYWxsc2hvdycpO1xuXHR9KTtcblxuXHQvLyBNb2RhbFxuXG5cdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0JCgnW2RhdGEtbW9kYWxdJykuaXppTW9kYWwoe1xuXHRcdFx0b25DbG9zaW5nOiBmdW5jdGlvbihyKXtcblx0XHRcdFx0dmFyIHZpZGVvID0gci4kZWxlbWVudC5maW5kKCd2aWRlbycpLmdldCgwKTtcblxuXHRcdFx0XHRpZiAodmlkZW8pIHtcblx0XHRcdFx0XHR2aWRlby5wYXVzZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sIDEpXG5cblxuXHQkKCdbZGF0YS1vcGVuXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHR2YXIgbSA9ICQodGhpcykuZGF0YSgnb3BlbicpO1xuXHRcdCQoJ1tkYXRhLW1vZGFsPScrbSsnXScpLml6aU1vZGFsKCdvcGVuJyk7XG5cdH0pO1xuXG5cblx0JCgnLmdhbGxlcnlfX3ZpZXcsIC5zaG9wX19zbGlkZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpbWcgPSAkKHRoaXMpLmZpbmQoJ2ltZycpLmNsb25lKCk7XG5cblx0XHQkKCcubW9kYWxfem9vbSAubW9kYWxfX2NvbnRlbnQnKS5odG1sKGltZylcblxuXHRcdCQoJy5tb2RhbF96b29tJykuaXppTW9kYWwoJ29wZW4nKTtcblx0fSk7XG5cblxuXHQkKCcuZmlsdGVyLXRvZ2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdCQoJy5maWx0ZXIgLnRvZ2dsZTpub3QoLnRvZ2dsZV9jbG9zZSknKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdCQoJy5maWx0ZXInKS50b2dnbGUoKTtcblx0fSk7XG5cblx0JCgnLm0tbWVudV9fdG9nZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCgnLm0tbWVudV9fY29udGVudCcpLnRvZ2dsZSgpO1xuXHR9KTtcblxuXHQkKCcubS1tZW51X19pdGVtX2Ryb3AnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuXHRcdHZhciBkcm9wID0gJCh0aGlzKS5maW5kKCcubS1tZW51X19kcm9wJykuZmlyc3QoKTtcblxuXG5cdFx0aWYgKCQoZS50YXJnZXQpLnBhcmVudHNVbnRpbCgnLm0tbWVudV9faXRlbV9kcm9wJykubGVuZ3RoIDw9IDEpIHtcblx0XHRcdCQoZHJvcCkudG9nZ2xlQ2xhc3MoJ20tbWVudV9fZHJvcF9zaG93Jyk7XG5cdFx0fVxuXG5cdH0pO1xuXG5cdCQoJy5tLW1lbnVfX2JhY2snKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuXHRcdCQodGhpcykuY2xvc2VzdCgnLm0tbWVudV9fZHJvcF9zaG93JykucmVtb3ZlQ2xhc3MoJ20tbWVudV9fZHJvcF9zaG93Jyk7XG5cdH0pO1xuXG5cdCQoJ1tkYXRhLXRhYnNdID4gKicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHR2YXIgZGF0YSA9ICQodGhpcykucGFyZW50KCkuZGF0YSgndGFicycpLFxuXHRcdFx0XHRpbmRleCA9ICQodGhpcykuaW5kZXgoKSxcblx0XHRcdFx0Y29udGVudCA9ICQoJ1tkYXRhLXRhYnMtY29udGVudD0nK2RhdGErJ10nKS5jaGlsZHJlbigpLmdldChpbmRleCk7XG5cblx0XHQkKGNvbnRlbnQpLnNob3coKS5zaWJsaW5ncygpLmhpZGUoKTtcblxuXHRcdGlmICghY29udGVudCkge1xuXHRcdFx0JCgnW2RhdGEtdGFicy1jb250ZW50PScrZGF0YSsnXScpLmNoaWxkcmVuKCkuaGlkZSgpO1xuXHRcdH1cblxuXHRcdCQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHR9KTtcblxuXHQvLyBpZiAoJCgnLm1vZGFsX3ZpZGVvJykuZ2V0KDApKSB7XG5cdC8vIFx0JChcIi5tb2RhbF92aWRlb1wiKS5pemlNb2RhbCh7XG5cdC8vIFx0XHRoaXN0b3J5OiBmYWxzZSxcblx0Ly8gXHRcdGlmcmFtZSA6IHRydWUsXG5cdC8vIFx0XHRmdWxsc2NyZWVuOiB0cnVlLFxuXHQvLyBcdFx0aGVhZGVyQ29sb3I6ICcjMDAwMDAwJyxcblx0Ly8gXHRcdGdyb3VwOiAnZ3JvdXAxJyxcblx0Ly8gXHRcdGxvb3A6IHRydWVcblx0Ly8gXHR9KTtcblx0Ly8gfVxuXG5cblx0JCgnLnZpZGVvJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGlkID0gJCh0aGlzKS5kYXRhKCdpZCcpO1xuXG5cdFx0JCgnIycraWQpLml6aU1vZGFsKCdvcGVuJyk7XG5cdH0pO1xuXG5cdCQoJy5jaGVja2JveCBpbnB1dCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0JCh0aGlzKS5jbG9zZXN0KCcuY2hlY2tib3gnKS50b2dnbGVDbGFzcygnY2hlY2tib3hfYWN0aXZlJyk7XG5cdH0pO1xuXG5cdHZhciBzY3JvbGxpbmcsXG5cdFx0XHR0b1RvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50by10b3AnKTtcblxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbihlKSB7XG5cdFx0IHNjcm9sbGluZyA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xuXG5cdFx0IGlmICgkKGUudGFyZ2V0KS5jbG9zZXN0KCcucmVzdWx0cycpLmdldCgwKSkgcmV0dXJuO1xuXG5cdFx0IGlmIChzY3JvbGxpbmcgPj0gMjAwKSB7XG5cdFx0XHQgJCgnLmhlYWRlcl9fZml4JykuYWRkQ2xhc3MoJ2hlYWRlcl9fZml4X3Nob3cnKTtcblx0XHRcdCAkKCcucmVzdWx0cycpLmFwcGVuZFRvKCcuaGVhZGVyX19maXggLnNlYXJjaCcpO1xuXHRcdCB9IGVsc2UgaWYgKCQoJy5oZWFkZXJfX2ZpeCcpLmhhc0NsYXNzKCdoZWFkZXJfX2ZpeF9zaG93JykpIHtcblx0XHRcdCAkKCcuaGVhZGVyX19maXgnKS5yZW1vdmVDbGFzcygnaGVhZGVyX19maXhfc2hvdycpO1xuXHRcdFx0ICQoJy5yZXN1bHRzJykuYXBwZW5kVG8oJy5oZWFkZXJfX2JvZHkgLnNlYXJjaCcpO1xuXHRcdCB9XG5cblx0XHQgaWYgKHNjcm9sbGluZyA+PSAxMDAwICYmIHdpbmRvd1dpZHRoID4gOTYwKSB7XG5cdFx0XHQgdG9Ub3AuY2xhc3NMaXN0LmFkZCgndG8tdG9wX3Nob3cnKTtcblx0XHQgfSBlbHNlIHtcblx0XHRcdCB0b1RvcC5jbGFzc0xpc3QucmVtb3ZlKCd0by10b3Bfc2hvdycpO1xuXHRcdCB9XG5cdH0sIHRydWUpO1xuXG5cdCQoJy50by10b3AnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHQkKFwiaHRtbCwgYm9keVwiKS5zdG9wKCkuYW5pbWF0ZSh7c2Nyb2xsVG9wOjB9LCA1MDAsICdzd2luZycpO1xuXHR9KTtcblxuXHQkKCcuY291bnRlcl9fYnRuX3BsdXMnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0JCgnLnRpcF9faGlkZWNvbnRlbnQnKS5oaWRlKCk7XG5cdFx0JCh0aGlzKS5wYXJlbnQoKS5maW5kKCcudGlwX19oaWRlY29udGVudCcpLmZpcnN0KCkuc2hvdygpO1xuXHR9KTtcblxuXHQvLyBzZWFyY2hcblx0JCgnLnNlYXJjaF9fZmllbGQgaW5wdXQnKS5mb2N1cyhmdW5jdGlvbigpIHtcblx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5zZWFyY2gnKS5hZGRDbGFzcygnc2VhcmNoX2ZvY3VzJyk7XG5cdH0pO1xuXG5cdCQoJy5zZWFyY2hfX2ZpZWxkIGlucHV0JykuZm9jdXNvdXQoZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5jbG9zZXN0KCcuc2VhcmNoJykucmVtb3ZlQ2xhc3MoJ3NlYXJjaF9mb2N1cycpO1xuXHR9KTtcblxuXHRpbml0KCk7XG5cblx0JCgnYnV0dG9uLmJ0biwgLmNvdW50ZXJfX2J0biwgLmNsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0fSlcblxuXHQkKCdhW2hyZWZePVwiI1wiXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0dmFyIGlkID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG5cbiAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgIHNjcm9sbFRvcDogJChpZCkub2Zmc2V0KCkudG9wICsgJCgnYm9keScpLnNjcm9sbFRvcCgpIC0gODBcbiAgICB9LCAxMDAwKTtcblxuXHR9KTtcblxuXHQkKCcuZHJvcCAuY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5kcm9wLW9wZW4nKS5yZW1vdmVDbGFzcygnZHJvcC1vcGVuJyk7XG5cdH0pXG5cblxufSkod2luZG93KTtcbiJdfQ==
