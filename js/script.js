'use strict';

(function (root) {

	// Инициализация прилдожения
	var windowWidth = $(window).width();

	function init() {

		if ($('.gallery').get(0)) {
			$('.gallery__element').first().trigger('click');
		}

		$('[data-tabs]').each(function (i, tabs) {
			$(tabs).children().first().trigger('click');
		});

		$('.toggle_close').each(function (i, toggle) {
			var data = $(this).data('toggle');

			$(this).parent().find('.' + data).hide();
		});
	};

	$(window).on('resize', function () {
		windowWidth = $(window).width();
	});

	// Слайдеры
	var dataSliders = {
		feautures: {
			items: 6,
			nav: true
		},
		gallery: {
			items: 1,
			nav: true,
			dots: true,
			mouseDrag: false,
			responsive: {
				961: {
					items: 4,
					dots: false
				}
			}
		},
		promo: {
			items: 1,
			dots: true,
			loop: true,
			autoplay: true
		},
		shop: {
			items: 1,
			loop: true,
			nav: false,
			center: false,
			responsive: {
				961: {
					items: 3,
					center: true,
					nav: true
				}
			}
		}
	};

	$('[data-slider]').each(function (i, slider) {
		var data = $(this).data('slider');

		$(slider).owlCarousel(dataSliders[data]);
	});

	$('.range__slider').each(function () {
		var range = this,
		    minInput = $(range).closest('.range').find('[data-input="min"]'),
		    maxInput = $(range).closest('.range').find('[data-input="max"]');

		function update() {
			var from = $(range).data('from'),
			    to = $(range).data('to');

			$(minInput).val(from);
			$(maxInput).val(to);
		}

		$(range).ionRangeSlider({
			extra_classes: 'range__slider',
			hide_min_max: true,
			hide_from_to: true
		});

		update();
		$(range).on('change', update);
	});

	$('[data-input]').on('change', function () {
		var range = $(this).closest('.range').find('input.range__slider').data("ionRangeSlider"),
		    val = $(this).val(),
		    min = range.options.min,
		    max = range.options.max,
		    from = range.options.from,
		    to = range.options.to,
		    step = range.options.step;

		switch ($(this).data('input')) {
			case 'min':
				if (val <= min) {
					val = min;
				} else if (val >= max) {
					val = max - step;
				} else if (val >= to) {
					val = to - step;
				}

				range.update({
					from: val
				});
				break;
			case 'max':
				if (val >= max) {
					val = max;
				} else if (val <= min) {
					val = min + step;
				} else if (val <= from) {
					val = from + step;
				}

				range.update({
					to: val
				});
				break;
		}

		$(this).val(val);
	});

	// fields
	function filled(field) {
		var val = $(field).val().trim();

		if (val.length > 0) {
			$(field).closest('.field').addClass('field_filled');
		} else {
			$(field).closest('.field').removeClass('field_filled');
		}
	}

	$('.field input, .field textarea').each(function () {
		filled(this);
	});

	$(document).on('keydown', '.field input, .field textarea', function () {
		var t = this;
		setTimeout(function () {
			filled(t);
		}, 100);
	});

	$('.toggle').on('click', function (e) {
		e.stopPropagation();
		var content = $(this).parent().find($('.' + $(this).data('toggle')));
		$(this).toggleClass('toggle_close');
		$(content).stop().slideToggle(300);
	});

	$('.filter__block-content').each(function (i, block) {
		var checks = $(block).find('.checkbox').length;

		if (checks > 5) {
			$(block).addClass('filter__block-content_more');
			$(block).append('<span class="filter__block-more">Показать все</span>');
		}
	});

	$('.filter__block-more').on('click', function () {
		$(this).parent().removeClass('filter__block-content_more');
		$(this).remove();
	});

	$('.drop__item').on('click', function () {
		if (!$(this).hasClass('drop__item_link')) {
			$(this).addClass('drop__item_active').siblings().removeClass('drop__item_active');
		}

		$(this).closest('[data-drop]').removeClass('drop-open');
	});

	$(document).on('click', '[data-drop]', function () {

		var data = $(this).data('drop');

		if (data == 'trigger') {
			$('.drop-open').removeClass('drop-open');
			$(this).parent().closest('[data-drop]').addClass('drop-open');
		} else return;
	});

	$(document).on('click', function (e) {

		var drop = $(e.target).parent().closest('[data-drop]').get(0),
		    tip = $(e.target).parent().closest('.tip').get(0);

		if ($(e.target).hasClass('counter__btn_plus')) return;

		if (!drop) {
			$('.drop-open').removeClass('drop-open');
		}

		if (!tip) {
			$('.tip__hidecontent').hide();
			$('.container__main').css('z-index', '');
		}
	});

	$('.description__show').on('click', function () {
		$(this).hide();
		$('.description__short').hide();
		$('.description__all').show();
	});

	$('[data-close]').on('click', function (e) {
		e.preventDefault();

		$(this).parent().hide();
		$(this).closest('.card').css('z-index', '');
	});

	$('.tip__name').on('click', function () {
		$('.container__main').css('z-index', '3');
		$('.card').css('z-index', '');
		$('.tip__hidecontent').hide();
		$(this).parent().find('.tip__hidecontent').show();
		$(this).closest('.card').css('z-index', '2');
	});

	$('.tip_hover').hover(function () {
		$(this).find('.tip__hidecontent').show();
	}, function () {
		$('.tip__hidecontent').hide();
	});

	// Gallery
	$('.gallery__element').on('click', function () {

		if ($(this).hasClass('gallery__element_video')) {
			var video = $(this).find('video').clone();

			$('.modal_zoom .modal__content').html(video);

			$('.modal_zoom').iziModal('open');
		} else {
			var img = $(this).find('img').clone();

			$(this).closest('.gallery').find('.gallery__view').empty().append(img);

			$(this).closest('.gallery__list').find('.gallery__element_active').removeClass('gallery__element_active');
			$(this).addClass('gallery__element_active');

			$('.gallery__view img').magnify();
		}
	});

	$('.vlist_full').each(function (i, list) {
		var show = $(list).data('show'),
		    line = $(list).find('.vlist__line:not(.vlist__line_head)').get(show);

		$(line).hide().nextAll(':not(.vlist__line_more)').hide();
	});

	$('.vlist__more').on('click', function () {
		$(this).closest('.vlist').toggleClass('vlist_allshow');
	});

	// Modal

	setTimeout(function () {
		$('[data-modal]').iziModal({
			onClosing: function onClosing(r) {
				var video = r.$element.find('video').get(0);

				if (video) {
					video.pause();
				}
			}
		});
	}, 1);

	$('[data-open]').on('click', function (e) {
		e.preventDefault();

		var m = $(this).data('open');
		$('[data-modal=' + m + ']').iziModal('open');
	});

	$('.gallery__view, .shop__slide').on('click', function () {
		var img = $(this).find('img').clone();

		$('.modal_zoom .modal__content').html(img);

		$('.modal_zoom').iziModal('open');
	});

	$('.filter-toggle').on('click', function () {
		$('.filter .toggle:not(.toggle_close)').trigger('click');
		$('.filter').toggle();
	});

	$('.m-menu__toggle').on('click', function () {
		$('.m-menu__content').toggle();
	});

	$('.m-menu__item_drop').on('click', function (e) {
		e.stopPropagation();

		var drop = $(this).find('.m-menu__drop').first();

		if ($(e.target).parentsUntil('.m-menu__item_drop').length <= 1) {
			$(drop).toggleClass('m-menu__drop_show');
		}
	});

	$('.m-menu__back').on('click', function (e) {
		e.stopPropagation();

		$(this).closest('.m-menu__drop_show').removeClass('m-menu__drop_show');
	});

	$('[data-tabs] > *').on('click', function (e) {
		e.preventDefault();

		var data = $(this).parent().data('tabs'),
		    index = $(this).index(),
		    content = $('[data-tabs-content=' + data + ']').children().get(index);

		$(content).show().siblings().hide();

		if (!content) {
			$('[data-tabs-content=' + data + ']').children().hide();
		}

		$(this).addClass('active').siblings().removeClass('active');
	});

	// if ($('.modal_video').get(0)) {
	// 	$(".modal_video").iziModal({
	// 		history: false,
	// 		iframe : true,
	// 		fullscreen: true,
	// 		headerColor: '#000000',
	// 		group: 'group1',
	// 		loop: true
	// 	});
	// }


	$('.video').on('click', function () {
		var id = $(this).data('id');

		$('#' + id).iziModal('open');
	});

	$('.checkbox input').on('click', function (e) {
		e.stopPropagation();

		$(this).closest('.checkbox').toggleClass('checkbox_active');
	});

	var scrolling,
	    toTop = document.querySelector('.to-top');

	document.addEventListener('scroll', function (e) {
		scrolling = document.body.scrollTop;

		if ($(e.target).closest('.results').get(0)) return;

		console.log(scrolling);

		if ($(window).width() > 960) {
			if (scrolling >= 200) {
				$('.header__fix').addClass('header__fix_show');
				$('.results').appendTo('.header__fix .search');
			} else if ($('.header__fix').hasClass('header__fix_show')) {
				$('.header__fix').removeClass('header__fix_show');
				$('.results').appendTo('.header__body .search');
			}
		} else {
			if (scrolling >= 31) {
				$('.header__mobile').addClass('header__mobile_fix');
			} else if ($('.header__mobile').hasClass('header__mobile_fix')) {
				$('.header__mobile').removeClass('header__mobile_fix');
			}
		}

		if (scrolling >= 1000 && windowWidth > 960) {
			toTop.classList.add('to-top_show');
		} else {
			toTop.classList.remove('to-top_show');
		}
	}, true);

	$('.to-top').on('click', function () {
		$("html, body").stop().animate({ scrollTop: 0 }, 500, 'swing');
	});

	$('.counter__btn_plus').on('click', function (e) {
		e.preventDefault();

		$('.tip__hidecontent').hide();
		$(this).parent().find('.tip__hidecontent').first().show();
	});

	// search
	$('.search__field input').focus(function () {
		$(this).closest('.search').addClass('search_focus');
	});

	$('.search__field input').focusout(function () {
		$(this).closest('.search').removeClass('search_focus');
	});

	init();

	$('button.btn, .counter__btn, .close').on('click', function (e) {
		e.preventDefault();
	});

	$('a[href^="#"]').on('click', function (e) {
		e.preventDefault();
		var id = $(this).attr('href');

		$('html, body').animate({
			scrollTop: $(id).offset().top + $('body').scrollTop() - 80
		}, 1000);
	});

	$('.drop .close').on('click', function () {
		$(this).closest('.drop-open').removeClass('drop-open');
	});
})(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJyb290Iiwid2luZG93V2lkdGgiLCIkIiwid2luZG93Iiwid2lkdGgiLCJpbml0IiwiZ2V0IiwiZmlyc3QiLCJ0cmlnZ2VyIiwiZWFjaCIsImkiLCJ0YWJzIiwiY2hpbGRyZW4iLCJ0b2dnbGUiLCJkYXRhIiwicGFyZW50IiwiZmluZCIsImhpZGUiLCJvbiIsImRhdGFTbGlkZXJzIiwiZmVhdXR1cmVzIiwiaXRlbXMiLCJuYXYiLCJnYWxsZXJ5IiwiZG90cyIsIm1vdXNlRHJhZyIsInJlc3BvbnNpdmUiLCJwcm9tbyIsImxvb3AiLCJhdXRvcGxheSIsInNob3AiLCJjZW50ZXIiLCJzbGlkZXIiLCJvd2xDYXJvdXNlbCIsInJhbmdlIiwibWluSW5wdXQiLCJjbG9zZXN0IiwibWF4SW5wdXQiLCJ1cGRhdGUiLCJmcm9tIiwidG8iLCJ2YWwiLCJpb25SYW5nZVNsaWRlciIsImV4dHJhX2NsYXNzZXMiLCJoaWRlX21pbl9tYXgiLCJoaWRlX2Zyb21fdG8iLCJtaW4iLCJvcHRpb25zIiwibWF4Iiwic3RlcCIsImZpbGxlZCIsImZpZWxkIiwidHJpbSIsImxlbmd0aCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJkb2N1bWVudCIsInQiLCJzZXRUaW1lb3V0IiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImNvbnRlbnQiLCJ0b2dnbGVDbGFzcyIsInN0b3AiLCJzbGlkZVRvZ2dsZSIsImJsb2NrIiwiY2hlY2tzIiwiYXBwZW5kIiwicmVtb3ZlIiwiaGFzQ2xhc3MiLCJzaWJsaW5ncyIsImRyb3AiLCJ0YXJnZXQiLCJ0aXAiLCJjc3MiLCJzaG93IiwicHJldmVudERlZmF1bHQiLCJob3ZlciIsInZpZGVvIiwiY2xvbmUiLCJodG1sIiwiaXppTW9kYWwiLCJpbWciLCJlbXB0eSIsIm1hZ25pZnkiLCJsaXN0IiwibGluZSIsIm5leHRBbGwiLCJvbkNsb3NpbmciLCJyIiwiJGVsZW1lbnQiLCJwYXVzZSIsIm0iLCJwYXJlbnRzVW50aWwiLCJpbmRleCIsImlkIiwic2Nyb2xsaW5nIiwidG9Ub3AiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJvZHkiLCJzY3JvbGxUb3AiLCJjb25zb2xlIiwibG9nIiwiYXBwZW5kVG8iLCJjbGFzc0xpc3QiLCJhZGQiLCJhbmltYXRlIiwiZm9jdXMiLCJmb2N1c291dCIsImF0dHIiLCJvZmZzZXQiLCJ0b3AiXSwibWFwcGluZ3MiOiI7O0FBQUEsQ0FBQyxVQUFTQSxJQUFULEVBQWU7O0FBRWY7QUFDQSxLQUFJQyxjQUFjQyxFQUFFQyxNQUFGLEVBQVVDLEtBQVYsRUFBbEI7O0FBRUEsVUFBU0MsSUFBVCxHQUFnQjs7QUFFZixNQUFJSCxFQUFFLFVBQUYsRUFBY0ksR0FBZCxDQUFrQixDQUFsQixDQUFKLEVBQTBCO0FBQ3pCSixLQUFFLG1CQUFGLEVBQXVCSyxLQUF2QixHQUErQkMsT0FBL0IsQ0FBdUMsT0FBdkM7QUFDQTs7QUFFRE4sSUFBRSxhQUFGLEVBQWlCTyxJQUFqQixDQUFzQixVQUFTQyxDQUFULEVBQVlDLElBQVosRUFBa0I7QUFDdkNULEtBQUVTLElBQUYsRUFBUUMsUUFBUixHQUFtQkwsS0FBbkIsR0FBMkJDLE9BQTNCLENBQW1DLE9BQW5DO0FBQ0EsR0FGRDs7QUFJQU4sSUFBRSxlQUFGLEVBQW1CTyxJQUFuQixDQUF3QixVQUFTQyxDQUFULEVBQVlHLE1BQVosRUFBb0I7QUFDM0MsT0FBSUMsT0FBT1osRUFBRSxJQUFGLEVBQVFZLElBQVIsQ0FBYSxRQUFiLENBQVg7O0FBRUFaLEtBQUUsSUFBRixFQUFRYSxNQUFSLEdBQWlCQyxJQUFqQixDQUFzQixNQUFJRixJQUExQixFQUFnQ0csSUFBaEM7QUFDQSxHQUpEO0FBS0E7O0FBRURmLEdBQUVDLE1BQUYsRUFBVWUsRUFBVixDQUFhLFFBQWIsRUFBdUIsWUFBVztBQUNqQ2pCLGdCQUFjQyxFQUFFQyxNQUFGLEVBQVVDLEtBQVYsRUFBZDtBQUNBLEVBRkQ7O0FBSUE7QUFDQSxLQUFJZSxjQUFjO0FBQ2pCQyxhQUFX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LFlBQUYsRUFBZ0J5RyxPQUFoQixDQUF3QjtBQUNwQk4sY0FBV25HLEVBQUU2RixFQUFGLEVBQU1nQixNQUFOLEdBQWVDLEdBQWYsR0FBcUI5RyxFQUFFLE1BQUYsRUFBVW1HLFNBQVYsRUFBckIsR0FBNkM7QUFEcEMsR0FBeEIsRUFFRyxJQUZIO0FBSUYsRUFSRDs7QUFVQW5HLEdBQUUsY0FBRixFQUFrQmdCLEVBQWxCLENBQXFCLE9BQXJCLEVBQThCLFlBQVc7QUFDeENoQixJQUFFLElBQUYsRUFBUWtDLE9BQVIsQ0FBZ0IsWUFBaEIsRUFBOEJtQixXQUE5QixDQUEwQyxXQUExQztBQUNBLEVBRkQ7QUFJQSxDQW5jRCxFQW1jR3BELE1BbmNIIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihyb290KSB7XG5cblx0Ly8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/RgNC40LvQtNC+0LbQtdC90LjRj1xuXHR2YXIgd2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcblxuXHRmdW5jdGlvbiBpbml0KCkge1xuXG5cdFx0aWYgKCQoJy5nYWxsZXJ5JykuZ2V0KDApKSB7XG5cdFx0XHQkKCcuZ2FsbGVyeV9fZWxlbWVudCcpLmZpcnN0KCkudHJpZ2dlcignY2xpY2snKTtcblx0XHR9XG5cblx0XHQkKCdbZGF0YS10YWJzXScpLmVhY2goZnVuY3Rpb24oaSwgdGFicykge1xuXHRcdFx0JCh0YWJzKS5jaGlsZHJlbigpLmZpcnN0KCkudHJpZ2dlcignY2xpY2snKTtcblx0XHR9KTtcblxuXHRcdCQoJy50b2dnbGVfY2xvc2UnKS5lYWNoKGZ1bmN0aW9uKGksIHRvZ2dsZSkge1xuXHRcdFx0dmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoJ3RvZ2dsZScpO1xuXG5cdFx0XHQkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy4nK2RhdGEpLmhpZGUoKTtcblx0XHR9KTtcblx0fTtcblxuXHQkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXHRcdHdpbmRvd1dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG5cdH0pO1xuXG5cdC8vINCh0LvQsNC50LTQtdGA0Ytcblx0dmFyIGRhdGFTbGlkZXJzID0ge1xuXHRcdGZlYXV0dXJlczoge1xuXHRcdFx0aXRlbXM6IDYsXG5cdFx0XHRuYXY6IHRydWVcblx0XHR9LFxuXHRcdGdhbGxlcnk6IHtcblx0XHRcdGl0ZW1zOiAxLFxuXHRcdFx0bmF2OiB0cnVlLFxuXHRcdFx0ZG90czogdHJ1ZSxcblx0XHRcdG1vdXNlRHJhZzogZmFsc2UsXG5cdFx0XHRyZXNwb25zaXZlOiB7XG5cdFx0XHRcdDk2MToge1xuXHRcdFx0XHRcdGl0ZW1zOiA0LFxuXHRcdFx0XHRcdGRvdHM6IGZhbHNlXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdHByb21vOiB7XG5cdFx0XHRpdGVtczogMSxcblx0XHRcdGRvdHM6IHRydWUsXG5cdFx0XHRsb29wOiB0cnVlLFxuXHRcdFx0YXV0b3BsYXk6IHRydWUsXG5cdFx0fSxcblx0XHRzaG9wOiB7XG5cdFx0XHRpdGVtczogMSxcblx0XHRcdGxvb3A6IHRydWUsXG5cdFx0XHRuYXY6IGZhbHNlLFxuXHRcdFx0Y2VudGVyOiBmYWxzZSxcblx0XHRcdHJlc3BvbnNpdmU6IHtcblx0XHRcdFx0OTYxOiB7XG5cdFx0XHRcdFx0aXRlbXM6IDMsXG5cdFx0XHRcdFx0Y2VudGVyOiB0cnVlLFxuXHRcdFx0XHRcdG5hdjogdHJ1ZSxcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdCQoJ1tkYXRhLXNsaWRlcl0nKS5lYWNoKGZ1bmN0aW9uKGksIHNsaWRlcikge1xuXHRcdHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKCdzbGlkZXInKTtcblxuXHRcdCQoc2xpZGVyKS5vd2xDYXJvdXNlbChkYXRhU2xpZGVyc1tkYXRhXSlcblx0fSk7XG5cblx0JCgnLnJhbmdlX19zbGlkZXInKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdHZhciByYW5nZSA9IHRoaXMsXG5cdFx0XHRcdG1pbklucHV0ID0gJChyYW5nZSkuY2xvc2VzdCgnLnJhbmdlJykuZmluZCgnW2RhdGEtaW5wdXQ9XCJtaW5cIl0nKSxcblx0XHRcdFx0bWF4SW5wdXQgPSAkKHJhbmdlKS5jbG9zZXN0KCcucmFuZ2UnKS5maW5kKCdbZGF0YS1pbnB1dD1cIm1heFwiXScpO1xuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlKCkge1xuXHRcdFx0dmFyIGZyb20gPSAkKHJhbmdlKS5kYXRhKCdmcm9tJyksXG5cdFx0XHRcdFx0dG8gPSAkKHJhbmdlKS5kYXRhKCd0bycpO1xuXG5cdFx0XHQkKG1pbklucHV0KS52YWwoZnJvbSk7XG5cdFx0XHQkKG1heElucHV0KS52YWwodG8pO1xuXHRcdH1cblxuXHRcdCQocmFuZ2UpLmlvblJhbmdlU2xpZGVyKHtcblx0XHRcdGV4dHJhX2NsYXNzZXM6ICdyYW5nZV9fc2xpZGVyJyxcblx0XHRcdGhpZGVfbWluX21heDogdHJ1ZSxcblx0XHRcdGhpZGVfZnJvbV90bzogdHJ1ZSxcblx0XHR9KTtcblxuXHRcdHVwZGF0ZSgpO1xuXHRcdCQocmFuZ2UpLm9uKCdjaGFuZ2UnLCB1cGRhdGUpO1xuXHR9KTtcblxuXHQkKCdbZGF0YS1pbnB1dF0nKS5vbignY2hhbmdlJywgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHJhbmdlID0gJCh0aGlzKS5jbG9zZXN0KCcucmFuZ2UnKS5maW5kKCdpbnB1dC5yYW5nZV9fc2xpZGVyJykuZGF0YShcImlvblJhbmdlU2xpZGVyXCIpLFxuXHRcdFx0XHR2YWwgPSAkKHRoaXMpLnZhbCgpLFxuXHRcdFx0XHRtaW4gPSByYW5nZS5vcHRpb25zLm1pbixcblx0XHRcdFx0bWF4ID0gcmFuZ2Uub3B0aW9ucy5tYXgsXG5cdFx0XHRcdGZyb20gPSByYW5nZS5vcHRpb25zLmZyb20sXG5cdFx0XHRcdHRvID0gcmFuZ2Uub3B0aW9ucy50byxcblx0XHRcdFx0c3RlcCA9IHJhbmdlLm9wdGlvbnMuc3RlcDtcblxuXHRcdHN3aXRjaCAoJCh0aGlzKS5kYXRhKCdpbnB1dCcpKSB7XG5cdFx0XHRjYXNlICdtaW4nOlxuXHRcdFx0XHRpZiAodmFsIDw9IG1pbikge1xuXHRcdFx0XHRcdHZhbCA9IG1pbjtcblx0XHRcdFx0fSBlbHNlIGlmICh2YWwgPj0gbWF4KSB7XG5cdFx0XHRcdFx0dmFsID0gbWF4IC0gc3RlcDtcblx0XHRcdFx0fSBlbHNlIGlmICh2YWwgPj0gdG8pIHtcblx0XHRcdFx0XHR2YWwgPSB0byAtIHN0ZXA7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyYW5nZS51cGRhdGUoe1xuXHRcdFx0XHRcdGZyb206IHZhbFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdtYXgnOlxuXHRcdFx0XHRpZiAodmFsID49IG1heCkge1xuXHRcdFx0XHRcdHZhbCA9IG1heDtcblx0XHRcdFx0fSBlbHNlIGlmICh2YWwgPD0gbWluKSB7XG5cdFx0XHRcdFx0dmFsID0gbWluICsgc3RlcDtcblx0XHRcdFx0fSBlbHNlIGlmICh2YWwgPD0gZnJvbSkge1xuXHRcdFx0XHRcdHZhbCA9IGZyb20gKyBzdGVwO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmFuZ2UudXBkYXRlKHtcblx0XHRcdFx0XHR0bzogdmFsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHQkKHRoaXMpLnZhbCh2YWwpO1xuXG5cdH0pO1xuXG5cdC8vIGZpZWxkc1xuXHRmdW5jdGlvbiBmaWxsZWQoZmllbGQpIHtcblx0XHR2YXIgdmFsID0gJChmaWVsZCkudmFsKCkudHJpbSgpO1xuXG5cdFx0aWYgKHZhbC5sZW5ndGggPiAwKSB7XG5cdFx0XHQkKGZpZWxkKS5jbG9zZXN0KCcuZmllbGQnKS5hZGRDbGFzcygnZmllbGRfZmlsbGVkJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoZmllbGQpLmNsb3Nlc3QoJy5maWVsZCcpLnJlbW92ZUNsYXNzKCdmaWVsZF9maWxsZWQnKTtcblx0XHR9XG5cdH1cblxuXHQkKCcuZmllbGQgaW5wdXQsIC5maWVsZCB0ZXh0YXJlYScpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0ZmlsbGVkKHRoaXMpO1xuXHR9KTtcblxuXHQkKGRvY3VtZW50KS5vbigna2V5ZG93bicsICcuZmllbGQgaW5wdXQsIC5maWVsZCB0ZXh0YXJlYScsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0ID0gdGhpcztcblx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0ZmlsbGVkKHQpO1xuXHRcdH0sIDEwMClcblx0fSk7XG5cblxuXHQkKCcudG9nZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKClcblx0XHR2YXIgY29udGVudCA9ICQodGhpcykucGFyZW50KCkuZmluZCgkKCcuJyskKHRoaXMpLmRhdGEoJ3RvZ2dsZScpKSk7XG5cdFx0JCh0aGlzKS50b2dnbGVDbGFzcygndG9nZ2xlX2Nsb3NlJyk7XG5cdFx0JChjb250ZW50KS5zdG9wKCkuc2xpZGVUb2dnbGUoMzAwKTtcblx0fSk7XG5cblx0JCgnLmZpbHRlcl9fYmxvY2stY29udGVudCcpLmVhY2goZnVuY3Rpb24oaSwgYmxvY2spIHtcblx0XHR2YXIgY2hlY2tzID0gJChibG9jaykuZmluZCgnLmNoZWNrYm94JykubGVuZ3RoO1xuXG5cdFx0aWYgKGNoZWNrcyA+IDUpIHtcblx0XHRcdCQoYmxvY2spLmFkZENsYXNzKCdmaWx0ZXJfX2Jsb2NrLWNvbnRlbnRfbW9yZScpO1xuXHRcdFx0JChibG9jaykuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImZpbHRlcl9fYmxvY2stbW9yZVwiPtCf0L7QutCw0LfQsNGC0Ywg0LLRgdC1PC9zcGFuPicpO1xuXHRcdH1cblx0fSk7XG5cblx0JCgnLmZpbHRlcl9fYmxvY2stbW9yZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdCQodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2ZpbHRlcl9fYmxvY2stY29udGVudF9tb3JlJyk7XG5cdFx0JCh0aGlzKS5yZW1vdmUoKTtcblx0fSk7XG5cblx0JCgnLmRyb3BfX2l0ZW0nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2Ryb3BfX2l0ZW1fbGluaycpKSB7XG5cdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdkcm9wX19pdGVtX2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2Ryb3BfX2l0ZW1fYWN0aXZlJyk7XG5cdFx0fVxuXG5cdFx0JCh0aGlzKS5jbG9zZXN0KCdbZGF0YS1kcm9wXScpLnJlbW92ZUNsYXNzKCdkcm9wLW9wZW4nKTtcblx0fSk7XG5cblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLWRyb3BdJywgZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgZGF0YSA9ICQodGhpcykuZGF0YSgnZHJvcCcpO1xuXG5cdFx0aWYgKGRhdGEgPT0gJ3RyaWdnZXInKSB7XG5cdFx0XHQkKCcuZHJvcC1vcGVuJykucmVtb3ZlQ2xhc3MoJ2Ryb3Atb3BlbicpO1xuXHRcdFx0JCh0aGlzKS5wYXJlbnQoKS5jbG9zZXN0KCdbZGF0YS1kcm9wXScpLmFkZENsYXNzKCdkcm9wLW9wZW4nKTtcblx0XHR9IGVsc2UgcmV0dXJuO1xuXG5cdH0pO1xuXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblxuXHRcdHZhciBkcm9wID0gJChlLnRhcmdldCkucGFyZW50KCkuY2xvc2VzdCgnW2RhdGEtZHJvcF0nKS5nZXQoMCksXG5cdFx0XHRcdHRpcCA9ICQoZS50YXJnZXQpLnBhcmVudCgpLmNsb3Nlc3QoJy50aXAnKS5nZXQoMCk7XG5cblx0XHRpZiAoJChlLnRhcmdldCkuaGFzQ2xhc3MoJ2NvdW50ZXJfX2J0bl9wbHVzJykpIHJldHVybjtcblxuXHRcdGlmICghZHJvcCkge1xuXHRcdFx0JCgnLmRyb3Atb3BlbicpLnJlbW92ZUNsYXNzKCdkcm9wLW9wZW4nKTtcblx0XHR9XG5cblx0XHRpZiAoIXRpcCkge1xuXHRcdFx0JCgnLnRpcF9faGlkZWNvbnRlbnQnKS5oaWRlKCk7XG5cdFx0XHQkKCcuY29udGFpbmVyX19tYWluJykuY3NzKCd6LWluZGV4JywgJycpO1xuXHRcdH1cblxuXHR9KVxuXG5cdCQoJy5kZXNjcmlwdGlvbl9fc2hvdycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdCQodGhpcykuaGlkZSgpO1xuXHRcdCQoJy5kZXNjcmlwdGlvbl9fc2hvcnQnKS5oaWRlKCk7XG5cdFx0JCgnLmRlc2NyaXB0aW9uX19hbGwnKS5zaG93KCk7XG5cdH0pO1xuXG5cdCQoJ1tkYXRhLWNsb3NlXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHQkKHRoaXMpLnBhcmVudCgpLmhpZGUoKTtcblx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5jYXJkJykuY3NzKCd6LWluZGV4JywgJycpO1xuXHR9KTtcblxuXHQkKCcudGlwX19uYW1lJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCgnLmNvbnRhaW5lcl9fbWFpbicpLmNzcygnei1pbmRleCcsICczJyk7XG5cdFx0JCgnLmNhcmQnKS5jc3MoJ3otaW5kZXgnLCAnJyk7XG5cdFx0JCgnLnRpcF9faGlkZWNvbnRlbnQnKS5oaWRlKCk7XG5cdFx0JCh0aGlzKS5wYXJlbnQoKS5maW5kKCcudGlwX19oaWRlY29udGVudCcpLnNob3coKTtcblx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5jYXJkJykuY3NzKCd6LWluZGV4JywgJzInKTtcblx0fSk7XG5cblx0JCgnLnRpcF9ob3ZlcicpLmhvdmVyKGZ1bmN0aW9uKCkge1xuXHRcdCQodGhpcykuZmluZCgnLnRpcF9faGlkZWNvbnRlbnQnKS5zaG93KCk7XG5cdH0sIGZ1bmN0aW9uKCkge1xuXHRcdCQoJy50aXBfX2hpZGVjb250ZW50JykuaGlkZSgpO1xuXHR9KTtcblxuXHQvLyBHYWxsZXJ5XG5cdCQoJy5nYWxsZXJ5X19lbGVtZW50Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cblx0XHRpZiAoJCh0aGlzKS5oYXNDbGFzcygnZ2FsbGVyeV9fZWxlbWVudF92aWRlbycpKSB7XG5cdFx0XHR2YXIgdmlkZW8gPSAkKHRoaXMpLmZpbmQoJ3ZpZGVvJykuY2xvbmUoKTtcblxuXHRcdFx0JCgnLm1vZGFsX3pvb20gLm1vZGFsX19jb250ZW50JykuaHRtbCh2aWRlbyk7XG5cblx0XHRcdCQoJy5tb2RhbF96b29tJykuaXppTW9kYWwoJ29wZW4nKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgaW1nID0gJCh0aGlzKS5maW5kKCdpbWcnKS5jbG9uZSgpO1xuXG5cdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5nYWxsZXJ5JykuZmluZCgnLmdhbGxlcnlfX3ZpZXcnKS5lbXB0eSgpLmFwcGVuZChpbWcpO1xuXG5cdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5nYWxsZXJ5X19saXN0JykuZmluZCgnLmdhbGxlcnlfX2VsZW1lbnRfYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2dhbGxlcnlfX2VsZW1lbnRfYWN0aXZlJyk7XG5cdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdnYWxsZXJ5X19lbGVtZW50X2FjdGl2ZScpO1xuXG5cdFx0XHQkKCcuZ2FsbGVyeV9fdmlldyBpbWcnKS5tYWduaWZ5KCk7XG5cdFx0fVxuXG5cdH0pO1xuXG5cdCQoJy52bGlzdF9mdWxsJykuZWFjaChmdW5jdGlvbihpLCBsaXN0KSB7XG5cdFx0dmFyIHNob3cgPSAkKGxpc3QpLmRhdGEoJ3Nob3cnKSxcblx0XHRcdFx0bGluZSA9ICQobGlzdCkuZmluZCgnLnZsaXN0X19saW5lOm5vdCgudmxpc3RfX2xpbmVfaGVhZCknKS5nZXQoc2hvdyk7XG5cblx0XHQkKGxpbmUpLmhpZGUoKS5uZXh0QWxsKCc6bm90KC52bGlzdF9fbGluZV9tb3JlKScpLmhpZGUoKTtcblx0fSk7XG5cblx0JCgnLnZsaXN0X19tb3JlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5jbG9zZXN0KCcudmxpc3QnKS50b2dnbGVDbGFzcygndmxpc3RfYWxsc2hvdycpO1xuXHR9KTtcblxuXHQvLyBNb2RhbFxuXG5cdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0JCgnW2RhdGEtbW9kYWxdJykuaXppTW9kYWwoe1xuXHRcdFx0b25DbG9zaW5nOiBmdW5jdGlvbihyKXtcblx0XHRcdFx0dmFyIHZpZGVvID0gci4kZWxlbWVudC5maW5kKCd2aWRlbycpLmdldCgwKTtcblxuXHRcdFx0XHRpZiAodmlkZW8pIHtcblx0XHRcdFx0XHR2aWRlby5wYXVzZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sIDEpXG5cblxuXHQkKCdbZGF0YS1vcGVuXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHR2YXIgbSA9ICQodGhpcykuZGF0YSgnb3BlbicpO1xuXHRcdCQoJ1tkYXRhLW1vZGFsPScrbSsnXScpLml6aU1vZGFsKCdvcGVuJyk7XG5cdH0pO1xuXG5cblx0JCgnLmdhbGxlcnlfX3ZpZXcsIC5zaG9wX19zbGlkZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpbWcgPSAkKHRoaXMpLmZpbmQoJ2ltZycpLmNsb25lKCk7XG5cblx0XHQkKCcubW9kYWxfem9vbSAubW9kYWxfX2NvbnRlbnQnKS5odG1sKGltZylcblxuXHRcdCQoJy5tb2RhbF96b29tJykuaXppTW9kYWwoJ29wZW4nKTtcblx0fSk7XG5cblxuXHQkKCcuZmlsdGVyLXRvZ2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdCQoJy5maWx0ZXIgLnRvZ2dsZTpub3QoLnRvZ2dsZV9jbG9zZSknKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdCQoJy5maWx0ZXInKS50b2dnbGUoKTtcblx0fSk7XG5cblx0JCgnLm0tbWVudV9fdG9nZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCgnLm0tbWVudV9fY29udGVudCcpLnRvZ2dsZSgpO1xuXHR9KTtcblxuXHQkKCcubS1tZW51X19pdGVtX2Ryb3AnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuXHRcdHZhciBkcm9wID0gJCh0aGlzKS5maW5kKCcubS1tZW51X19kcm9wJykuZmlyc3QoKTtcblxuXG5cdFx0aWYgKCQoZS50YXJnZXQpLnBhcmVudHNVbnRpbCgnLm0tbWVudV9faXRlbV9kcm9wJykubGVuZ3RoIDw9IDEpIHtcblx0XHRcdCQoZHJvcCkudG9nZ2xlQ2xhc3MoJ20tbWVudV9fZHJvcF9zaG93Jyk7XG5cdFx0fVxuXG5cdH0pO1xuXG5cdCQoJy5tLW1lbnVfX2JhY2snKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuXHRcdCQodGhpcykuY2xvc2VzdCgnLm0tbWVudV9fZHJvcF9zaG93JykucmVtb3ZlQ2xhc3MoJ20tbWVudV9fZHJvcF9zaG93Jyk7XG5cdH0pO1xuXG5cdCQoJ1tkYXRhLXRhYnNdID4gKicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHR2YXIgZGF0YSA9ICQodGhpcykucGFyZW50KCkuZGF0YSgndGFicycpLFxuXHRcdFx0XHRpbmRleCA9ICQodGhpcykuaW5kZXgoKSxcblx0XHRcdFx0Y29udGVudCA9ICQoJ1tkYXRhLXRhYnMtY29udGVudD0nK2RhdGErJ10nKS5jaGlsZHJlbigpLmdldChpbmRleCk7XG5cblx0XHQkKGNvbnRlbnQpLnNob3coKS5zaWJsaW5ncygpLmhpZGUoKTtcblxuXHRcdGlmICghY29udGVudCkge1xuXHRcdFx0JCgnW2RhdGEtdGFicy1jb250ZW50PScrZGF0YSsnXScpLmNoaWxkcmVuKCkuaGlkZSgpO1xuXHRcdH1cblxuXHRcdCQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHR9KTtcblxuXHQvLyBpZiAoJCgnLm1vZGFsX3ZpZGVvJykuZ2V0KDApKSB7XG5cdC8vIFx0JChcIi5tb2RhbF92aWRlb1wiKS5pemlNb2RhbCh7XG5cdC8vIFx0XHRoaXN0b3J5OiBmYWxzZSxcblx0Ly8gXHRcdGlmcmFtZSA6IHRydWUsXG5cdC8vIFx0XHRmdWxsc2NyZWVuOiB0cnVlLFxuXHQvLyBcdFx0aGVhZGVyQ29sb3I6ICcjMDAwMDAwJyxcblx0Ly8gXHRcdGdyb3VwOiAnZ3JvdXAxJyxcblx0Ly8gXHRcdGxvb3A6IHRydWVcblx0Ly8gXHR9KTtcblx0Ly8gfVxuXG5cblx0JCgnLnZpZGVvJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGlkID0gJCh0aGlzKS5kYXRhKCdpZCcpO1xuXG5cdFx0JCgnIycraWQpLml6aU1vZGFsKCdvcGVuJyk7XG5cdH0pO1xuXG5cdCQoJy5jaGVja2JveCBpbnB1dCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0JCh0aGlzKS5jbG9zZXN0KCcuY2hlY2tib3gnKS50b2dnbGVDbGFzcygnY2hlY2tib3hfYWN0aXZlJyk7XG5cdH0pO1xuXG5cdHZhciBzY3JvbGxpbmcsXG5cdFx0XHR0b1RvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50by10b3AnKTtcblxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbihlKSB7XG5cdFx0IHNjcm9sbGluZyA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xuXG5cdFx0IGlmICgkKGUudGFyZ2V0KS5jbG9zZXN0KCcucmVzdWx0cycpLmdldCgwKSkgcmV0dXJuO1xuXG5cdFx0IGNvbnNvbGUubG9nKHNjcm9sbGluZyk7XG5cblx0XHQgaWYgKCQod2luZG93KS53aWR0aCgpID4gOTYwKSB7XG5cdFx0XHQgaWYgKHNjcm9sbGluZyA+PSAyMDApIHtcblx0XHRcdFx0ICQoJy5oZWFkZXJfX2ZpeCcpLmFkZENsYXNzKCdoZWFkZXJfX2ZpeF9zaG93Jyk7XG5cdFx0XHRcdCAkKCcucmVzdWx0cycpLmFwcGVuZFRvKCcuaGVhZGVyX19maXggLnNlYXJjaCcpO1xuXHRcdFx0IH0gZWxzZSBpZiAoJCgnLmhlYWRlcl9fZml4JykuaGFzQ2xhc3MoJ2hlYWRlcl9fZml4X3Nob3cnKSkge1xuXHRcdFx0XHQgJCgnLmhlYWRlcl9fZml4JykucmVtb3ZlQ2xhc3MoJ2hlYWRlcl9fZml4X3Nob3cnKTtcblx0XHRcdFx0ICQoJy5yZXN1bHRzJykuYXBwZW5kVG8oJy5oZWFkZXJfX2JvZHkgLnNlYXJjaCcpO1xuXHRcdFx0IH1cblx0XHQgfSBlbHNlIHtcblx0XHRcdCBpZiAoc2Nyb2xsaW5nID49IDMxKSB7XG5cdFx0XHRcdCAkKCcuaGVhZGVyX19tb2JpbGUnKS5hZGRDbGFzcygnaGVhZGVyX19tb2JpbGVfZml4Jyk7XG5cdFx0XHQgfSBlbHNlIGlmICgkKCcuaGVhZGVyX19tb2JpbGUnKS5oYXNDbGFzcygnaGVhZGVyX19tb2JpbGVfZml4JykpIHtcblx0XHRcdFx0ICQoJy5oZWFkZXJfX21vYmlsZScpLnJlbW92ZUNsYXNzKCdoZWFkZXJfX21vYmlsZV9maXgnKTtcblx0XHRcdCB9XG5cblx0XHQgfVxuXG5cdFx0IGlmIChzY3JvbGxpbmcgPj0gMTAwMCAmJiB3aW5kb3dXaWR0aCA+IDk2MCkge1xuXHRcdFx0IHRvVG9wLmNsYXNzTGlzdC5hZGQoJ3RvLXRvcF9zaG93Jyk7XG5cdFx0IH0gZWxzZSB7XG5cdFx0XHQgdG9Ub3AuY2xhc3NMaXN0LnJlbW92ZSgndG8tdG9wX3Nob3cnKTtcblx0XHQgfVxuXHR9LCB0cnVlKTtcblxuXHQkKCcudG8tdG9wJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JChcImh0bWwsIGJvZHlcIikuc3RvcCgpLmFuaW1hdGUoe3Njcm9sbFRvcDowfSwgNTAwLCAnc3dpbmcnKTtcblx0fSk7XG5cblx0JCgnLmNvdW50ZXJfX2J0bl9wbHVzJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdCQoJy50aXBfX2hpZGVjb250ZW50JykuaGlkZSgpO1xuXHRcdCQodGhpcykucGFyZW50KCkuZmluZCgnLnRpcF9faGlkZWNvbnRlbnQnKS5maXJzdCgpLnNob3coKTtcblx0fSk7XG5cblx0Ly8gc2VhcmNoXG5cdCQoJy5zZWFyY2hfX2ZpZWxkIGlucHV0JykuZm9jdXMoZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5jbG9zZXN0KCcuc2VhcmNoJykuYWRkQ2xhc3MoJ3NlYXJjaF9mb2N1cycpO1xuXHR9KTtcblxuXHQkKCcuc2VhcmNoX19maWVsZCBpbnB1dCcpLmZvY3Vzb3V0KGZ1bmN0aW9uKCkge1xuXHRcdCQodGhpcykuY2xvc2VzdCgnLnNlYXJjaCcpLnJlbW92ZUNsYXNzKCdzZWFyY2hfZm9jdXMnKTtcblx0fSk7XG5cblx0aW5pdCgpO1xuXG5cdCQoJ2J1dHRvbi5idG4sIC5jb3VudGVyX19idG4sIC5jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdH0pXG5cblx0JCgnYVtocmVmXj1cIiNcIl0nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdHZhciBpZCA9ICQodGhpcykuYXR0cignaHJlZicpO1xuXG4gICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgICAgICBzY3JvbGxUb3A6ICQoaWQpLm9mZnNldCgpLnRvcCArICQoJ2JvZHknKS5zY3JvbGxUb3AoKSAtIDgwXG4gICAgfSwgMTAwMCk7XG5cblx0fSk7XG5cblx0JCgnLmRyb3AgLmNsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5jbG9zZXN0KCcuZHJvcC1vcGVuJykucmVtb3ZlQ2xhc3MoJ2Ryb3Atb3BlbicpO1xuXHR9KVxuXG59KSh3aW5kb3cpO1xuIl19
